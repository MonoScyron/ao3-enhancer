(()=>{"use strict";var e={534:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addKudosToHitRatios=void 0;const r=o(962);t.addKudosToHitRatios=function(e){let t,o=(0,r.constructWorkList)(e);t="works"==e.URL.split("/")[3]?e.querySelectorAll("dl.stats"):e.querySelectorAll(".group[role='article'] dl.stats");let n=[],l=[];o.forEach(((t,o)=>{if(null!=t.stats.kudos&&0!=t.stats.hits){var r=e.createElement("dt");r.className="kudos-to-hit-ratio",r.innerHTML="Ratio:";var i=e.createElement("dd");i.className="ratio",i.innerHTML=Math.round(t.stats.kudos/t.stats.hits*1e3)/10+"%",n[o]=r,l[o]=i}else n[o]=null,l[o]=null}));for(var i=0;i<t.length;i++)null!=n[i]&&null!=l[i]&&t[i].append(n[i],l[i])}},962:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.constructWorkList=void 0;const r=o(733);function n(e){var t,o,n,l,i,s,u,a,c,d,g,h,m,p;let f,T=[];e.querySelectorAll("a[rel='author']").forEach((e=>{T.push(e.innerHTML)}));let v=[];e.querySelectorAll("a[href$='/gifts']").forEach((e=>{null==v||v.push(e.innerHTML)})),0==v.length&&(v=null);let E=[];null===(t=e.querySelector(".fandoms"))||void 0===t||t.querySelectorAll(".tag").forEach((e=>{E.push(e.innerHTML)}));let y=e.querySelector(".tags"),S=[];y.querySelectorAll(".warnings").forEach((e=>{S.push((0,r.warningToEnum)(e.querySelector(".tag").innerHTML))}));let A=[];y.querySelectorAll("li:not(.warnings)").forEach((e=>{A.push(e.querySelector(".tag").innerHTML)})),0==A.length&&(A=null);let R=[];null===(o=e.querySelector(".series"))||void 0===o||o.querySelectorAll("a").forEach((e=>{R.push(e.innerHTML)})),0==R.length&&(R=null);let k=e.querySelector(".stats"),q=k.querySelector("dd.chapters").innerText.split("/"),w=[];return null===(l=null===(n=e.querySelector("span.category"))||void 0===n?void 0:n.getAttribute("title"))||void 0===l||l.split(", ").forEach((e=>{w.push((0,r.categoryToEnum)(e))})),0==w.length&&(w=null),f={href:null===(s=null===(i=e.querySelector(".heading"))||void 0===i?void 0:i.firstElementChild)||void 0===s?void 0:s.getAttribute("href"),title:null===(a=null===(u=e.querySelector(".heading"))||void 0===u?void 0:u.firstElementChild)||void 0===a?void 0:a.innerHTML,authors:T,recipients:v,fandoms:E,tags:{warnings:S,tags:A},summary:e.querySelector(".summary").innerText,series:R,updateDate:null===(c=e.querySelector("p.datetime"))||void 0===c?void 0:c.innerHTML,rating:(0,r.ratingToEnum)(null===(d=e.querySelector("span.rating"))||void 0===d?void 0:d.getAttribute("title")),categories:w,complete:"Complete Work"==(null===(g=e.querySelector("span.iswip"))||void 0===g?void 0:g.getAttribute("title")),stats:{language:null===(h=k.querySelector("dd.language"))||void 0===h?void 0:h.innerHTML,wordCount:parseInt(null===(m=k.querySelector("dd.words"))||void 0===m?void 0:m.innerHTML),chapterCount:parseInt(q[0]),finalChapterCount:"?"==q[1]?null:parseInt(q[1]),collections:null==k.querySelector("dd.collections")?0:parseInt(k.querySelector("dd.collections").innerText),comments:null==k.querySelector("dd.comments")?0:parseInt(k.querySelector("dd.comments").innerText),kudos:null==k.querySelector("dd.kudos")?0:parseInt(k.querySelector("dd.kudos").innerText),bookmarks:null==k.querySelector("dd.bookmarks")?0:parseInt(k.querySelector("dd.bookmarks").innerText),hits:parseInt(null===(p=k.querySelector("dd.hits"))||void 0===p?void 0:p.innerHTML)}},f}t.constructWorkList=function(e){let t=function(e){var t;let o=null===(t=e.querySelector(".group"))||void 0===t?void 0:t.classList[0];return"works"==e.URL.split("/")[3]?e.getElementsByClassName("work meta group"):"bookmark"==o||"work"==o?e.getElementsByClassName(o+" blurb group"):e.getElementsByClassName("work blurb group")}(e),o=[];for(var r=0;r<t.length;r++)o.push(n(t[r]));return o}},733:(e,t)=>{var o,r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.categoryToEnum=t.ratingToEnum=t.warningToEnum=t.idToWarningEnum=t.idToCatetoryEnum=t.idToRatingEnum=t.WARNING=t.CATEGORY=t.RATING=t.HIDE_URLS=t.REDIRECT_URLS=t.SETTINGS_CHANGED=t.DEFAULT_VALUES=t.STORAGE_KEYS=void 0,t.STORAGE_KEYS=["kudosHitRatio","filtering","language","query","tags","warnings"],t.DEFAULT_VALUES={kudosHitRatio:!0,filtering:!1,language:[!1,""],query:[!1,""],tags:[],warnings:[]},t.SETTINGS_CHANGED="settings_changed",t.REDIRECT_URLS=["https://archiveofourown.org/tags/*/works","https://archiveofourown.org/tags/*/bookmarks","https://archiveofourown.org/users/*/works*","https://archiveofourown.org/users/*/bookmarks*","https://archiveofourown.org/collections/*/works","https://archiveofourown.org/collections/*/bookmarks"],t.HIDE_URLS=["https://archiveofourown.org/users/","https://archiveofourown.org/users/.*/series","https://archiveofourown.org/users/.*/gifts","https://archiveofourown.org/collections/.*/series"],function(e){e[e.notRated=9]="notRated",e[e.gen=10]="gen",e[e.teen=11]="teen",e[e.mature=12]="mature",e[e.explicit=13]="explicit"}(o=t.RATING||(t.RATING={})),function(e){e[e.gen=21]="gen",e[e.fm=22]="fm",e[e.mm=23]="mm",e[e.other=24]="other",e[e.ff=116]="ff",e[e.multi=2246]="multi"}(r=t.CATEGORY||(t.CATEGORY={})),function(e){e[e.choseNotToUse=14]="choseNotToUse",e[e.noWarningsApply=16]="noWarningsApply",e[e.violence=17]="violence",e[e.mcd=18]="mcd",e[e.nonCon=19]="nonCon",e[e.underage=20]="underage"}(n=t.WARNING||(t.WARNING={})),t.idToRatingEnum=function(e){return 9==e?o.notRated:10==e?o.gen:11==e?o.teen:12==e?o.mature:o.explicit},t.idToCatetoryEnum=function(e){return 21==e?r.gen:22==e?r.fm:23==e?r.mm:24==e?r.other:116==e?r.ff:r.multi},t.idToWarningEnum=function(e){return 14==e?n.choseNotToUse:16==e?n.noWarningsApply:17==e?n.violence:18==e?n.mcd:19==e?n.nonCon:n.underage},t.warningToEnum=function(e){return"Choose Not To Use Archive Warnings"==e?n.choseNotToUse:"Graphic Depictions Of Violence"==e?n.violence:"Major Character Death"==e?n.mcd:"No Archive Warnings Apply"==e?n.noWarningsApply:"Rape/Non-Con"==e?n.nonCon:n.underage},t.ratingToEnum=function(e){return"Not Rated"==e?o.notRated:"General Audiences"==e?o.gen:"Teen And Up Audiences"==e?o.teen:"Mature"==e?o.mature:o.explicit},t.categoryToEnum=function(e){return"F/F"==e?r.ff:"F/M"==e?r.fm:"Gen"==e?r.gen:"M/M"==e?r.mm:"Multi"==e?r.multi:r.other}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,o),l.exports}(()=>{const e=o(733),t=o(534);function r(e){e.kudosHitRatio&&(0,t.addKudosToHitRatios)(document)}browser.storage.local.get(e.STORAGE_KEYS).then((t=>{0==Object.keys(t).length?browser.storage.local.set(e.DEFAULT_VALUES).then((()=>r(e.DEFAULT_VALUES))):r(t)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBUSxLQUN0Qm9HLEVBQVUsRUFBUSxLQWdCeEIsU0FBU0MsRUFBY2hJLEdBRWZBLEVBQU1rRyxnQkFDTixFQUFJNkIsRUFBUTlILHFCQUFxQkUsU0FDekMsQ0FsQkE4SCxRQUFRQyxRQUFRQyxNQUFNQyxJQUFJekcsRUFBWXNFLGNBQWNvQyxNQUFNckksSUFFckIsR0FBN0JILE9BQU95SSxLQUFLdEksR0FBT3lCLE9BQ25Cd0csUUFBUUMsUUFBUUMsTUFBTUksSUFBSTVHLEVBQVlxRSxnQkFBZ0JxQyxNQUFLLElBQU1MLEVBQWNyRyxFQUFZcUUsa0JBRzNGZ0MsRUFBY2hJLEVBQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb250ZW50X3NjcmlwdHMvcmF0aW8udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRlbnRfc2NyaXB0cy93b3Jrcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZXhwb3J0L2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRlbnRfc2NyaXB0cy9vbmxvYWQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5hZGRLdWRvc1RvSGl0UmF0aW9zID0gdm9pZCAwO1xyXG5jb25zdCB3b3Jrc18xID0gcmVxdWlyZShcIi4vd29ya3NcIik7XHJcbi8qKlxyXG4gICogQWRkcyBrdWRvcyB0byBoaXQgcmF0aW9zIHRvIHdvcmtzIG9uIHRoZSBwYWdlXHJcbiAqIEBwYXJhbSBkb2N1bWVudCBEb2N1bWVudCBvZiB0aGUgcGFnZVxyXG4gKiBAcmV0dXJucyBbQXJyYXkgb2YgcmF0aW8gbGFiZWxzLCBhcnJheSBvZiByYXRpbyB2YWx1ZXNdXHJcbiAqL1xyXG5mdW5jdGlvbiBhZGRLdWRvc1RvSGl0UmF0aW9zKGRvY3VtZW50KSB7XHJcbiAgICAvLyBHZXQgbGlzdCBvZiB3b3Jrc1xyXG4gICAgbGV0IHdvcmtMaXN0ID0gKDAsIHdvcmtzXzEuY29uc3RydWN0V29ya0xpc3QpKGRvY3VtZW50KTtcclxuICAgIC8vIEdldCBsaXN0IG9mIHdvcmsgc3RhdHNcclxuICAgIGxldCBzdGF0c0xpc3Q7XHJcbiAgICBpZiAoZG9jdW1lbnQuVVJMLnNwbGl0KCcvJylbM10gPT0gXCJ3b3Jrc1wiKSB7XHJcbiAgICAgICAgc3RhdHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImRsLnN0YXRzXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc3RhdHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ncm91cFtyb2xlPSdhcnRpY2xlJ10gZGwuc3RhdHNcIik7XHJcbiAgICB9XHJcbiAgICAvLyBDcmVhdGUgcmF0aW8gZWxlbWVudHMgZm9yIGFsbCB3b3JrcyBvbiBwYWdlXHJcbiAgICBsZXQgcmF0aW9fZHRMaXN0ID0gW107XHJcbiAgICBsZXQgcmF0aW9fZGRMaXN0ID0gW107XHJcbiAgICB3b3JrTGlzdC5mb3JFYWNoKCh3b3JrLCBpKSA9PiB7XHJcbiAgICAgICAgaWYgKHdvcmsuc3RhdHMua3Vkb3MgIT0gbnVsbCAmJiB3b3JrLnN0YXRzLmhpdHMgIT0gMCkge1xyXG4gICAgICAgICAgICB2YXIgcmF0aW9fZHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZHRcIik7XHJcbiAgICAgICAgICAgIHJhdGlvX2R0LmNsYXNzTmFtZSA9IGBrdWRvcy10by1oaXQtcmF0aW9gO1xyXG4gICAgICAgICAgICByYXRpb19kdC5pbm5lckhUTUwgPSBcIlJhdGlvOlwiO1xyXG4gICAgICAgICAgICB2YXIgcmF0aW9fZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGRcIik7XHJcbiAgICAgICAgICAgIHJhdGlvX2RkLmNsYXNzTmFtZSA9IGByYXRpb2A7XHJcbiAgICAgICAgICAgIHJhdGlvX2RkLmlubmVySFRNTCA9IE1hdGgucm91bmQoKHdvcmsuc3RhdHMua3Vkb3MgLyB3b3JrLnN0YXRzLmhpdHMpICogMTAwMCkgLyAxMCArIFwiJVwiO1xyXG4gICAgICAgICAgICByYXRpb19kdExpc3RbaV0gPSByYXRpb19kdDtcclxuICAgICAgICAgICAgcmF0aW9fZGRMaXN0W2ldID0gcmF0aW9fZGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByYXRpb19kdExpc3RbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICByYXRpb19kZExpc3RbaV0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gQWRkIGxpc3Qgb2YgcmF0aW8gZWxlbWVudHMgdG8gd29ya3NcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdHNMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHJhdGlvX2R0TGlzdFtpXSAhPSBudWxsICYmIHJhdGlvX2RkTGlzdFtpXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHN0YXRzTGlzdFtpXS5hcHBlbmQocmF0aW9fZHRMaXN0W2ldLCByYXRpb19kZExpc3RbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnRzLmFkZEt1ZG9zVG9IaXRSYXRpb3MgPSBhZGRLdWRvc1RvSGl0UmF0aW9zO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNvbnN0cnVjdFdvcmtMaXN0ID0gdm9pZCAwO1xyXG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9leHBvcnQvY29uc3RhbnRzXCIpO1xyXG4vKipcclxuICogR2V0IGxpc3Qgb2Ygd29ya3MgZnJvbSBwYWdlIGFzIGFuIGFycmF5IG9mIFdvcmtFbGVtZW50IG9iamVjdHNcclxuICogQHBhcmFtIGRvY3VtZW50IERvY3VtZW50IG9mIEFPMyBwYWdlXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIHdvcmtzIGZyb20gcGFnZSBhcyBXb3JrRWxlbWVudCBvYmplY3RzXHJcbiAqL1xyXG5mdW5jdGlvbiBjb25zdHJ1Y3RXb3JrTGlzdChkb2N1bWVudCkge1xyXG4gICAgbGV0IHJhd1dvcmtzID0gY29uc3RydWN0UmF3V29ya0xpc3QoZG9jdW1lbnQpO1xyXG4gICAgbGV0IHdvcmtMaXN0ID0gW107XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd1dvcmtzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgd29ya0xpc3QucHVzaChjb25zdHVjdFdvcmtFbGVtZW50KHJhd1dvcmtzW2ldKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd29ya0xpc3Q7XHJcbn1cclxuZXhwb3J0cy5jb25zdHJ1Y3RXb3JrTGlzdCA9IGNvbnN0cnVjdFdvcmtMaXN0O1xyXG4vKipcclxuICogVGFrZXMgYSByYXcgd29yayBlbGVtZW50IGFuZCBwYXJzZXMgaXQgaW50byBhIFdvcmtFbGVtZW50IG9iamVjdFxyXG4gKiBAcGFyYW0gd29yayBSYXcgd29yayBlbGVtZW50XHJcbiAqIEByZXR1cm5zIFdvcmtFbGVtZW50IG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gY29uc3R1Y3RXb3JrRWxlbWVudCh3b3JrKSB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbSwgX28sIF9wO1xyXG4gICAgbGV0IHJldDtcclxuICAgIC8vIEF1dGhvciBsaXN0XHJcbiAgICBsZXQgYUxpc3QgPSBbXTtcclxuICAgIHdvcmsucXVlcnlTZWxlY3RvckFsbChcImFbcmVsPSdhdXRob3InXVwiKS5mb3JFYWNoKChlKSA9PiB7XHJcbiAgICAgICAgYUxpc3QucHVzaChlLmlubmVySFRNTCk7XHJcbiAgICB9KTtcclxuICAgIC8vIEdpZnQgbGlzdFxyXG4gICAgbGV0IGdMaXN0ID0gW107XHJcbiAgICB3b3JrLnF1ZXJ5U2VsZWN0b3JBbGwoXCJhW2hyZWYkPScvZ2lmdHMnXVwiKS5mb3JFYWNoKChlKSA9PiB7XHJcbiAgICAgICAgZ0xpc3QgPT09IG51bGwgfHwgZ0xpc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdMaXN0LnB1c2goZS5pbm5lckhUTUwpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZ0xpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgZ0xpc3QgPSBudWxsO1xyXG4gICAgLy8gRmFuZG9tIGxpc3RcclxuICAgIGxldCBmTGlzdCA9IFtdO1xyXG4gICAgKF9hID0gd29yay5xdWVyeVNlbGVjdG9yKCcuZmFuZG9tcycpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucXVlcnlTZWxlY3RvckFsbCgnLnRhZycpLmZvckVhY2goKGUpID0+IHtcclxuICAgICAgICBmTGlzdC5wdXNoKGUuaW5uZXJIVE1MKTtcclxuICAgIH0pO1xyXG4gICAgbGV0IHRhZ3MgPSB3b3JrLnF1ZXJ5U2VsZWN0b3IoJy50YWdzJyk7XHJcbiAgICAvLyBXYXJuaW5nIGxpc3RcclxuICAgIGxldCB3TGlzdCA9IFtdO1xyXG4gICAgdGFncy5xdWVyeVNlbGVjdG9yQWxsKCcud2FybmluZ3MnKS5mb3JFYWNoKChlKSA9PiB7XHJcbiAgICAgICAgd0xpc3QucHVzaCgoMCwgY29uc3RhbnRzXzEud2FybmluZ1RvRW51bSkoZS5xdWVyeVNlbGVjdG9yKCcudGFnJykuaW5uZXJIVE1MKSk7XHJcbiAgICB9KTtcclxuICAgIC8vIFRhZyBsaXN0XHJcbiAgICBsZXQgdExpc3QgPSBbXTtcclxuICAgIHRhZ3MucXVlcnlTZWxlY3RvckFsbCgnbGk6bm90KC53YXJuaW5ncyknKS5mb3JFYWNoKChlKSA9PiB7XHJcbiAgICAgICAgdExpc3QucHVzaChlLnF1ZXJ5U2VsZWN0b3IoJy50YWcnKS5pbm5lckhUTUwpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAodExpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgdExpc3QgPSBudWxsO1xyXG4gICAgLy8gU2VyaWVzIGxpc3RcclxuICAgIGxldCBzTGlzdCA9IFtdO1xyXG4gICAgKF9iID0gd29yay5xdWVyeVNlbGVjdG9yKCcuc2VyaWVzJykpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5xdWVyeVNlbGVjdG9yQWxsKCdhJykuZm9yRWFjaCgoZSkgPT4ge1xyXG4gICAgICAgIHNMaXN0LnB1c2goZS5pbm5lckhUTUwpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoc0xpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgc0xpc3QgPSBudWxsO1xyXG4gICAgbGV0IHN0YXRzID0gd29yay5xdWVyeVNlbGVjdG9yKCcuc3RhdHMnKTtcclxuICAgIC8vIENoYXB0ZXJzXHJcbiAgICBsZXQgY2hhcHRlcnMgPSBzdGF0cy5xdWVyeVNlbGVjdG9yKCdkZC5jaGFwdGVycycpLmlubmVyVGV4dC5zcGxpdCgnLycpO1xyXG4gICAgLy8gQ2F0ZWdvcmllcyBsaXN0XHJcbiAgICBsZXQgY0xpc3QgPSBbXTtcclxuICAgIChfZCA9IChfYyA9IHdvcmsucXVlcnlTZWxlY3Rvcignc3Bhbi5jYXRlZ29yeScpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZ2V0QXR0cmlidXRlKCd0aXRsZScpKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Quc3BsaXQoJywgJykuZm9yRWFjaChlID0+IHtcclxuICAgICAgICBjTGlzdC5wdXNoKCgwLCBjb25zdGFudHNfMS5jYXRlZ29yeVRvRW51bSkoZSkpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoY0xpc3QubGVuZ3RoID09IDApXHJcbiAgICAgICAgY0xpc3QgPSBudWxsO1xyXG4gICAgcmV0ID0ge1xyXG4gICAgICAgIGhyZWY6IChfZiA9IChfZSA9IHdvcmsucXVlcnlTZWxlY3RvcihcIi5oZWFkaW5nXCIpKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuZmlyc3RFbGVtZW50Q2hpbGQpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpLFxyXG4gICAgICAgIHRpdGxlOiAoX2ggPSAoX2cgPSB3b3JrLnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGluZ1wiKSkgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmZpcnN0RWxlbWVudENoaWxkKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaW5uZXJIVE1MLFxyXG4gICAgICAgIGF1dGhvcnM6IGFMaXN0LFxyXG4gICAgICAgIHJlY2lwaWVudHM6IGdMaXN0LFxyXG4gICAgICAgIGZhbmRvbXM6IGZMaXN0LFxyXG4gICAgICAgIHRhZ3M6IHtcclxuICAgICAgICAgICAgd2FybmluZ3M6IHdMaXN0LFxyXG4gICAgICAgICAgICB0YWdzOiB0TGlzdFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VtbWFyeTogd29yay5xdWVyeVNlbGVjdG9yKCcuc3VtbWFyeScpLmlubmVyVGV4dCxcclxuICAgICAgICBzZXJpZXM6IHNMaXN0LFxyXG4gICAgICAgIHVwZGF0ZURhdGU6IChfaiA9IHdvcmsucXVlcnlTZWxlY3RvcigncC5kYXRldGltZScpKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouaW5uZXJIVE1MLFxyXG4gICAgICAgIHJhdGluZzogKDAsIGNvbnN0YW50c18xLnJhdGluZ1RvRW51bSkoKF9rID0gd29yay5xdWVyeVNlbGVjdG9yKCdzcGFuLnJhdGluZycpKSA9PT0gbnVsbCB8fCBfayA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2suZ2V0QXR0cmlidXRlKCd0aXRsZScpKSxcclxuICAgICAgICBjYXRlZ29yaWVzOiBjTGlzdCxcclxuICAgICAgICBjb21wbGV0ZTogKChfbCA9IHdvcmsucXVlcnlTZWxlY3Rvcignc3Bhbi5pc3dpcCcpKSA9PT0gbnVsbCB8fCBfbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2wuZ2V0QXR0cmlidXRlKCd0aXRsZScpKSA9PSAnQ29tcGxldGUgV29yaycsXHJcbiAgICAgICAgc3RhdHM6IHtcclxuICAgICAgICAgICAgbGFuZ3VhZ2U6IChfbSA9IHN0YXRzLnF1ZXJ5U2VsZWN0b3IoJ2RkLmxhbmd1YWdlJykpID09PSBudWxsIHx8IF9tID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbS5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgIHdvcmRDb3VudDogcGFyc2VJbnQoKF9vID0gc3RhdHMucXVlcnlTZWxlY3RvcignZGQud29yZHMnKSkgPT09IG51bGwgfHwgX28gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vLmlubmVySFRNTCksXHJcbiAgICAgICAgICAgIGNoYXB0ZXJDb3VudDogcGFyc2VJbnQoY2hhcHRlcnNbMF0pLFxyXG4gICAgICAgICAgICBmaW5hbENoYXB0ZXJDb3VudDogY2hhcHRlcnNbMV0gPT0gJz8nID8gbnVsbCA6IHBhcnNlSW50KGNoYXB0ZXJzWzFdKSxcclxuICAgICAgICAgICAgY29sbGVjdGlvbnM6IHN0YXRzLnF1ZXJ5U2VsZWN0b3IoJ2RkLmNvbGxlY3Rpb25zJykgPT0gbnVsbCA/IDBcclxuICAgICAgICAgICAgICAgIDogcGFyc2VJbnQoc3RhdHMucXVlcnlTZWxlY3RvcignZGQuY29sbGVjdGlvbnMnKS5pbm5lclRleHQpLFxyXG4gICAgICAgICAgICBjb21tZW50czogc3RhdHMucXVlcnlTZWxlY3RvcignZGQuY29tbWVudHMnKSA9PSBudWxsID8gMFxyXG4gICAgICAgICAgICAgICAgOiBwYXJzZUludChzdGF0cy5xdWVyeVNlbGVjdG9yKCdkZC5jb21tZW50cycpLmlubmVyVGV4dCksXHJcbiAgICAgICAgICAgIGt1ZG9zOiBzdGF0cy5xdWVyeVNlbGVjdG9yKCdkZC5rdWRvcycpID09IG51bGwgPyAwXHJcbiAgICAgICAgICAgICAgICA6IHBhcnNlSW50KHN0YXRzLnF1ZXJ5U2VsZWN0b3IoJ2RkLmt1ZG9zJykuaW5uZXJUZXh0KSxcclxuICAgICAgICAgICAgYm9va21hcmtzOiBzdGF0cy5xdWVyeVNlbGVjdG9yKCdkZC5ib29rbWFya3MnKSA9PSBudWxsID8gMFxyXG4gICAgICAgICAgICAgICAgOiBwYXJzZUludChzdGF0cy5xdWVyeVNlbGVjdG9yKCdkZC5ib29rbWFya3MnKS5pbm5lclRleHQpLFxyXG4gICAgICAgICAgICBoaXRzOiBwYXJzZUludCgoX3AgPSBzdGF0cy5xdWVyeVNlbGVjdG9yKCdkZC5oaXRzJykpID09PSBudWxsIHx8IF9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcC5pbm5lckhUTUwpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuLyoqXHJcbiAqIEdldCBsaXN0IG9mIHdvcmtzIGZyb20gcGFnZSBhcyBhbiBIVE1MQ29sbGVjdGlvblxyXG4gKiBAcGFyYW0gZG9jdW1lbnQgRG9jdW1lbnQgb2YgQU8zIHBhZ2VcclxuICogQHJldHVybnMgTGlzdCBvZiB3b3JrcyBmcm9tIHBhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGNvbnN0cnVjdFJhd1dvcmtMaXN0KGRvY3VtZW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBsZXQgdHlwZSA9IChfYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncm91cCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xhc3NMaXN0WzBdO1xyXG4gICAgaWYgKGRvY3VtZW50LlVSTC5zcGxpdCgnLycpWzNdID09IFwid29ya3NcIikge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwid29yayBtZXRhIGdyb3VwXCIpOyAvLyBtZXRhXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09IFwiYm9va21hcmtcIiB8fCB0eXBlID09IFwid29ya1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUodHlwZSArIFwiIGJsdXJiIGdyb3VwXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ3b3JrIGJsdXJiIGdyb3VwXCIpO1xyXG4gICAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY2F0ZWdvcnlUb0VudW0gPSBleHBvcnRzLnJhdGluZ1RvRW51bSA9IGV4cG9ydHMud2FybmluZ1RvRW51bSA9IGV4cG9ydHMuaWRUb1dhcm5pbmdFbnVtID0gZXhwb3J0cy5pZFRvQ2F0ZXRvcnlFbnVtID0gZXhwb3J0cy5pZFRvUmF0aW5nRW51bSA9IGV4cG9ydHMuV0FSTklORyA9IGV4cG9ydHMuQ0FURUdPUlkgPSBleHBvcnRzLlJBVElORyA9IGV4cG9ydHMuSElERV9VUkxTID0gZXhwb3J0cy5SRURJUkVDVF9VUkxTID0gZXhwb3J0cy5TRVRUSU5HU19DSEFOR0VEID0gZXhwb3J0cy5ERUZBVUxUX1ZBTFVFUyA9IGV4cG9ydHMuU1RPUkFHRV9LRVlTID0gdm9pZCAwO1xyXG4vLyBTdG9yYWdlIGtleXNcclxuZXhwb3J0cy5TVE9SQUdFX0tFWVMgPSBbXHJcbiAgICBcImt1ZG9zSGl0UmF0aW9cIiwgXCJmaWx0ZXJpbmdcIiwgXCJsYW5ndWFnZVwiLCBcInF1ZXJ5XCIsIFwidGFnc1wiLCBcIndhcm5pbmdzXCJcclxuXTtcclxuLy8gRGVmYXVsdCB2YWx1ZXNcclxuZXhwb3J0cy5ERUZBVUxUX1ZBTFVFUyA9IHtcclxuICAgIGt1ZG9zSGl0UmF0aW86IHRydWUsXHJcbiAgICBmaWx0ZXJpbmc6IGZhbHNlLFxyXG4gICAgbGFuZ3VhZ2U6IFtmYWxzZSwgXCJcIl0sXHJcbiAgICBxdWVyeTogW2ZhbHNlLCBcIlwiXSxcclxuICAgIHRhZ3M6IFtdLFxyXG4gICAgd2FybmluZ3M6IFtdXHJcbn07XHJcbi8vIFNldHRpbmdzIGNoYW5nZWQgbWVzc2FnZVxyXG5leHBvcnRzLlNFVFRJTkdTX0NIQU5HRUQgPSBcInNldHRpbmdzX2NoYW5nZWRcIjtcclxuLyoqIFJlZGlyZWN0IHRoZXNlIFVSTHMgdG8gZmlsdGVyIHdvcmtzIHdpdGggZXhjbHVkZWQgc3R1ZmYgKi9cclxuZXhwb3J0cy5SRURJUkVDVF9VUkxTID0gW1xyXG4gICAgYGh0dHBzOi8vYXJjaGl2ZW9mb3Vyb3duLm9yZy90YWdzLyovd29ya3NgLFxyXG4gICAgYGh0dHBzOi8vYXJjaGl2ZW9mb3Vyb3duLm9yZy90YWdzLyovYm9va21hcmtzYCxcclxuICAgIGBodHRwczovL2FyY2hpdmVvZm91cm93bi5vcmcvdXNlcnMvKi93b3JrcypgLFxyXG4gICAgYGh0dHBzOi8vYXJjaGl2ZW9mb3Vyb3duLm9yZy91c2Vycy8qL2Jvb2ttYXJrcypgLFxyXG4gICAgYGh0dHBzOi8vYXJjaGl2ZW9mb3Vyb3duLm9yZy9jb2xsZWN0aW9ucy8qL3dvcmtzYCxcclxuICAgIGBodHRwczovL2FyY2hpdmVvZm91cm93bi5vcmcvY29sbGVjdGlvbnMvKi9ib29rbWFya3NgIC8vIENvbGxlY3Rpb24ncyBib29rbWFya3NcclxuXTtcclxuLyoqIENhbm5vdCByZWRpcmVjdCB0aGVzZSBVUkxzLCBuZWVkIHRvIGhpZGUgd29ya3Mgd2l0aCBleGNsdWRlZCBzdHVmZiAqL1xyXG5leHBvcnRzLkhJREVfVVJMUyA9IFtcclxuICAgIGBodHRwczpcXC9cXC9hcmNoaXZlb2ZvdXJvd25cXC5vcmdcXC91c2Vyc1xcL2AsXHJcbiAgICBgaHR0cHM6XFwvXFwvYXJjaGl2ZW9mb3Vyb3duXFwub3JnXFwvdXNlcnNcXC8uKlxcL3Nlcmllc2AsXHJcbiAgICBgaHR0cHM6XFwvXFwvYXJjaGl2ZW9mb3Vyb3duXFwub3JnXFwvdXNlcnNcXC8uKlxcL2dpZnRzYCxcclxuICAgIGBodHRwczpcXC9cXC9hcmNoaXZlb2ZvdXJvd25cXC5vcmdcXC9jb2xsZWN0aW9uc1xcLy4qXFwvc2VyaWVzYCwgLy8gQ29sbGVjdGlvbidzIHNlcmllc1xyXG5dO1xyXG47XHJcbi8qKiBSYXRpbmcgb2Ygd29ya3MgdG8gaWQgKi9cclxudmFyIFJBVElORztcclxuKGZ1bmN0aW9uIChSQVRJTkcpIHtcclxuICAgIFJBVElOR1tSQVRJTkdbXCJub3RSYXRlZFwiXSA9IDldID0gXCJub3RSYXRlZFwiO1xyXG4gICAgUkFUSU5HW1JBVElOR1tcImdlblwiXSA9IDEwXSA9IFwiZ2VuXCI7XHJcbiAgICBSQVRJTkdbUkFUSU5HW1widGVlblwiXSA9IDExXSA9IFwidGVlblwiO1xyXG4gICAgUkFUSU5HW1JBVElOR1tcIm1hdHVyZVwiXSA9IDEyXSA9IFwibWF0dXJlXCI7XHJcbiAgICBSQVRJTkdbUkFUSU5HW1wiZXhwbGljaXRcIl0gPSAxM10gPSBcImV4cGxpY2l0XCI7XHJcbn0pKFJBVElORyA9IGV4cG9ydHMuUkFUSU5HIHx8IChleHBvcnRzLlJBVElORyA9IHt9KSk7XHJcbi8qKiBDYXRlZ29yeSBvZiB3b3JrIHRvIGlkICovXHJcbnZhciBDQVRFR09SWTtcclxuKGZ1bmN0aW9uIChDQVRFR09SWSkge1xyXG4gICAgQ0FURUdPUllbQ0FURUdPUllbXCJnZW5cIl0gPSAyMV0gPSBcImdlblwiO1xyXG4gICAgQ0FURUdPUllbQ0FURUdPUllbXCJmbVwiXSA9IDIyXSA9IFwiZm1cIjtcclxuICAgIENBVEVHT1JZW0NBVEVHT1JZW1wibW1cIl0gPSAyM10gPSBcIm1tXCI7XHJcbiAgICBDQVRFR09SWVtDQVRFR09SWVtcIm90aGVyXCJdID0gMjRdID0gXCJvdGhlclwiO1xyXG4gICAgQ0FURUdPUllbQ0FURUdPUllbXCJmZlwiXSA9IDExNl0gPSBcImZmXCI7XHJcbiAgICBDQVRFR09SWVtDQVRFR09SWVtcIm11bHRpXCJdID0gMjI0Nl0gPSBcIm11bHRpXCI7XHJcbn0pKENBVEVHT1JZID0gZXhwb3J0cy5DQVRFR09SWSB8fCAoZXhwb3J0cy5DQVRFR09SWSA9IHt9KSk7XHJcbi8qKiBXYXJuaW5ncyBvZiB3b3JrIHRvIGlkICovXHJcbnZhciBXQVJOSU5HO1xyXG4oZnVuY3Rpb24gKFdBUk5JTkcpIHtcclxuICAgIFdBUk5JTkdbV0FSTklOR1tcImNob3NlTm90VG9Vc2VcIl0gPSAxNF0gPSBcImNob3NlTm90VG9Vc2VcIjtcclxuICAgIFdBUk5JTkdbV0FSTklOR1tcIm5vV2FybmluZ3NBcHBseVwiXSA9IDE2XSA9IFwibm9XYXJuaW5nc0FwcGx5XCI7XHJcbiAgICBXQVJOSU5HW1dBUk5JTkdbXCJ2aW9sZW5jZVwiXSA9IDE3XSA9IFwidmlvbGVuY2VcIjtcclxuICAgIFdBUk5JTkdbV0FSTklOR1tcIm1jZFwiXSA9IDE4XSA9IFwibWNkXCI7XHJcbiAgICBXQVJOSU5HW1dBUk5JTkdbXCJub25Db25cIl0gPSAxOV0gPSBcIm5vbkNvblwiO1xyXG4gICAgV0FSTklOR1tXQVJOSU5HW1widW5kZXJhZ2VcIl0gPSAyMF0gPSBcInVuZGVyYWdlXCI7XHJcbn0pKFdBUk5JTkcgPSBleHBvcnRzLldBUk5JTkcgfHwgKGV4cG9ydHMuV0FSTklORyA9IHt9KSk7XHJcbi8qKlxyXG4gKiBUYWtlcyByYXRpbmcgaWQgb2Ygd29yayBhbmQgY29udmVydHMgaXQgdG8gYW4gZW51bSB2YWx1ZVxyXG4gKiBAcGFyYW0gaWQgSWQgb2YgcmF0aW5nXHJcbiAqIEByZXR1cm5zIFJBVElORyBlbnVtIGNvbnZlcnRlZCBmcm9tIGlkXHJcbiAqL1xyXG5mdW5jdGlvbiBpZFRvUmF0aW5nRW51bShpZCkge1xyXG4gICAgaWYgKGlkID09IDkpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5ub3RSYXRlZDtcclxuICAgIGVsc2UgaWYgKGlkID09IDEwKVxyXG4gICAgICAgIHJldHVybiBSQVRJTkcuZ2VuO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMTEpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy50ZWVuO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMTIpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5tYXR1cmU7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5leHBsaWNpdDtcclxufVxyXG5leHBvcnRzLmlkVG9SYXRpbmdFbnVtID0gaWRUb1JhdGluZ0VudW07XHJcbi8qKlxyXG4gKiBUYWtlcyBjYXRlZ29yeSBpZCBvZiB3b3JrIGFuZCBjb252ZXJ0cyBpdCB0byBhbiBlbnVtIHZhbHVlXHJcbiAqIEBwYXJhbSBpZCBJZCBvZiBjYXRlZ29yeVxyXG4gKiBAcmV0dXJucyBDQVRFR09SWSBlbnVtIGNvbnZlcnRlZCBmcm9tIGlkXHJcbiAqL1xyXG5mdW5jdGlvbiBpZFRvQ2F0ZXRvcnlFbnVtKGlkKSB7XHJcbiAgICBpZiAoaWQgPT0gMjEpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLmdlbjtcclxuICAgIGVsc2UgaWYgKGlkID09IDIyKVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5mbTtcclxuICAgIGVsc2UgaWYgKGlkID09IDIzKVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5tbTtcclxuICAgIGVsc2UgaWYgKGlkID09IDI0KVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5vdGhlcjtcclxuICAgIGVsc2UgaWYgKGlkID09IDExNilcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkuZmY7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLm11bHRpO1xyXG59XHJcbmV4cG9ydHMuaWRUb0NhdGV0b3J5RW51bSA9IGlkVG9DYXRldG9yeUVudW07XHJcbi8qKlxyXG4gKiBUYWtlcyB3YXJuaW5nIGlkIG9mIHdvcmsgYW5kIGNvbnZlcnRzIGl0IHRvIGFuIGVudW0gdmFsdWVcclxuICogQHBhcmFtIGlkIElkIG9mIHdhcm5pbmdcclxuICogQHJldHVybnMgV0FSTklORyBlbnVtIGNvbnZlcnRlZCBmcm9tIGlkXHJcbiAqL1xyXG5mdW5jdGlvbiBpZFRvV2FybmluZ0VudW0oaWQpIHtcclxuICAgIGlmIChpZCA9PSAxNClcclxuICAgICAgICByZXR1cm4gV0FSTklORy5jaG9zZU5vdFRvVXNlO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMTYpXHJcbiAgICAgICAgcmV0dXJuIFdBUk5JTkcubm9XYXJuaW5nc0FwcGx5O1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMTcpXHJcbiAgICAgICAgcmV0dXJuIFdBUk5JTkcudmlvbGVuY2U7XHJcbiAgICBlbHNlIGlmIChpZCA9PSAxOClcclxuICAgICAgICByZXR1cm4gV0FSTklORy5tY2Q7XHJcbiAgICBlbHNlIGlmIChpZCA9PSAxOSlcclxuICAgICAgICByZXR1cm4gV0FSTklORy5ub25Db247XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIFdBUk5JTkcudW5kZXJhZ2U7XHJcbn1cclxuZXhwb3J0cy5pZFRvV2FybmluZ0VudW0gPSBpZFRvV2FybmluZ0VudW07XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBzdHJpbmcgdmFsdWUgb2YgYSB3YXJuaW5nIHRvIHRoZSBjb3JyZXNwb25kaW5nIFdBUk5JTkcgZW51bVxyXG4gKiBAcGFyYW0gd2FybmluZyBTdHJpbmcgb2Ygd2FybmluZyBmcm9tIHBhZ2VcclxuICogQHJldHVybnMgQ29udmVydGVkIGVudW0gdmFsdWUgb2YgcGFyYW1cclxuICovXHJcbmZ1bmN0aW9uIHdhcm5pbmdUb0VudW0od2FybmluZykge1xyXG4gICAgaWYgKHdhcm5pbmcgPT0gXCJDaG9vc2UgTm90IFRvIFVzZSBBcmNoaXZlIFdhcm5pbmdzXCIpXHJcbiAgICAgICAgcmV0dXJuIFdBUk5JTkcuY2hvc2VOb3RUb1VzZTtcclxuICAgIGVsc2UgaWYgKHdhcm5pbmcgPT0gXCJHcmFwaGljIERlcGljdGlvbnMgT2YgVmlvbGVuY2VcIilcclxuICAgICAgICByZXR1cm4gV0FSTklORy52aW9sZW5jZTtcclxuICAgIGVsc2UgaWYgKHdhcm5pbmcgPT0gXCJNYWpvciBDaGFyYWN0ZXIgRGVhdGhcIilcclxuICAgICAgICByZXR1cm4gV0FSTklORy5tY2Q7XHJcbiAgICBlbHNlIGlmICh3YXJuaW5nID09IFwiTm8gQXJjaGl2ZSBXYXJuaW5ncyBBcHBseVwiKVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLm5vV2FybmluZ3NBcHBseTtcclxuICAgIGVsc2UgaWYgKHdhcm5pbmcgPT0gXCJSYXBlL05vbi1Db25cIilcclxuICAgICAgICByZXR1cm4gV0FSTklORy5ub25Db247XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIFdBUk5JTkcudW5kZXJhZ2U7XHJcbn1cclxuZXhwb3J0cy53YXJuaW5nVG9FbnVtID0gd2FybmluZ1RvRW51bTtcclxuLyoqXHJcbiAqIENvbnZlcnRzIHN0cmluZyB2YWx1ZSBvZiBhIHJhdGluZyB0byB0aGUgY29ycmVzcG9uZGluZyBSQVRJTkcgZW51bVxyXG4gKiBAcGFyYW0gd2FybmluZyBTdHJpbmcgb2YgcmF0aW5nIGZyb20gcGFnZVxyXG4gKiBAcmV0dXJucyBDb252ZXJ0ZWQgZW51bSB2YWx1ZSBvZiBwYXJhbVxyXG4gKi9cclxuZnVuY3Rpb24gcmF0aW5nVG9FbnVtKHJhdGluZykge1xyXG4gICAgaWYgKHJhdGluZyA9PSBcIk5vdCBSYXRlZFwiKVxyXG4gICAgICAgIHJldHVybiBSQVRJTkcubm90UmF0ZWQ7XHJcbiAgICBlbHNlIGlmIChyYXRpbmcgPT0gXCJHZW5lcmFsIEF1ZGllbmNlc1wiKVxyXG4gICAgICAgIHJldHVybiBSQVRJTkcuZ2VuO1xyXG4gICAgZWxzZSBpZiAocmF0aW5nID09IFwiVGVlbiBBbmQgVXAgQXVkaWVuY2VzXCIpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy50ZWVuO1xyXG4gICAgZWxzZSBpZiAocmF0aW5nID09IFwiTWF0dXJlXCIpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5tYXR1cmU7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5leHBsaWNpdDtcclxufVxyXG5leHBvcnRzLnJhdGluZ1RvRW51bSA9IHJhdGluZ1RvRW51bTtcclxuLyoqXHJcbiAqIENvbnZlcnRzIHN0cmluZyB2YWx1ZSBvZiBhIGNhdGVnb3J5IHRvIHRoZSBjb3JyZXNwb25kaW5nIENBVEVHT1JZIGVudW1cclxuICogQHBhcmFtIHdhcm5pbmcgU3RyaW5nIG9mIGNhdGVnb3J5IGZyb20gcGFnZVxyXG4gKiBAcmV0dXJucyBDb252ZXJ0ZWQgZW51bSB2YWx1ZSBvZiBwYXJhbVxyXG4gKi9cclxuZnVuY3Rpb24gY2F0ZWdvcnlUb0VudW0oY2F0ZWdvcnkpIHtcclxuICAgIGlmIChjYXRlZ29yeSA9PSBcIkYvRlwiKVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5mZjtcclxuICAgIGVsc2UgaWYgKGNhdGVnb3J5ID09IFwiRi9NXCIpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLmZtO1xyXG4gICAgZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJHZW5cIilcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkuZ2VuO1xyXG4gICAgZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJNL01cIilcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkubW07XHJcbiAgICBlbHNlIGlmIChjYXRlZ29yeSA9PSBcIk11bHRpXCIpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLm11bHRpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5vdGhlcjtcclxufVxyXG5leHBvcnRzLmNhdGVnb3J5VG9FbnVtID0gY2F0ZWdvcnlUb0VudW07XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9leHBvcnQvY29uc3RhbnRzXCIpO1xyXG5jb25zdCByYXRpb18xID0gcmVxdWlyZShcIi4vcmF0aW9cIik7XHJcbi8vICogRXhlY3V0ZWQgY29kZSBzdGFydFxyXG5icm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KGNvbnN0YW50c18xLlNUT1JBR0VfS0VZUykudGhlbigodmFsdWUpID0+IHtcclxuICAgIC8vIElmIG5vIHNldHRpbmdzIHZhbHVlcyBhcmUgaW4gc3RvcmFnZSwgc2V0IGRlZmF1bHQgc2V0dGluZyB2YWx1ZXMgaW4gc3RvcmFnZVxyXG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoY29uc3RhbnRzXzEuREVGQVVMVF9WQUxVRVMpLnRoZW4oKCkgPT4gb25sb2FkUHJvbWlzZShjb25zdGFudHNfMS5ERUZBVUxUX1ZBTFVFUykpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgICAgIG9ubG9hZFByb21pc2UodmFsdWUpO1xyXG59KTtcclxuLy8gKiBFeGVjdXRlZCBjb2RlIGVuZFxyXG4vLyAqIEZ1bmN0aW9uc1xyXG4vKipcclxuICogRXhlY3V0ZWQgYWZ0ZXIgYWxsIHByb21pc2VzIGFyZSBmdWxmaWxsZWRcclxuICogQHBhcmFtIHZhbHVlIExvY2FsIHN0b3JhZ2UgdmFsdWVzIG9mIGFsbCBzYXZlZCBzZXR0aW5nc1xyXG4gKi9cclxuZnVuY3Rpb24gb25sb2FkUHJvbWlzZSh2YWx1ZSkge1xyXG4gICAgLy8gQWRkIGt1ZG9zIHRvIGhpdCByYXRpbyBpZiBvblxyXG4gICAgaWYgKHZhbHVlLmt1ZG9zSGl0UmF0aW8pXHJcbiAgICAgICAgKDAsIHJhdGlvXzEuYWRkS3Vkb3NUb0hpdFJhdGlvcykoZG9jdW1lbnQpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFkZEt1ZG9zVG9IaXRSYXRpb3MiLCJ3b3Jrc18xIiwiZG9jdW1lbnQiLCJzdGF0c0xpc3QiLCJ3b3JrTGlzdCIsImNvbnN0cnVjdFdvcmtMaXN0IiwiVVJMIiwic3BsaXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmF0aW9fZHRMaXN0IiwicmF0aW9fZGRMaXN0IiwiZm9yRWFjaCIsIndvcmsiLCJpIiwic3RhdHMiLCJrdWRvcyIsImhpdHMiLCJyYXRpb19kdCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJyYXRpb19kZCIsIk1hdGgiLCJyb3VuZCIsImxlbmd0aCIsImFwcGVuZCIsImNvbnN0YW50c18xIiwiY29uc3R1Y3RXb3JrRWxlbWVudCIsIl9hIiwiX2IiLCJfYyIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJfaiIsIl9rIiwiX2wiLCJfbSIsIl9vIiwiX3AiLCJyZXQiLCJhTGlzdCIsImUiLCJwdXNoIiwiZ0xpc3QiLCJmTGlzdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YWdzIiwid0xpc3QiLCJ3YXJuaW5nVG9FbnVtIiwidExpc3QiLCJzTGlzdCIsImNoYXB0ZXJzIiwiaW5uZXJUZXh0IiwiY0xpc3QiLCJnZXRBdHRyaWJ1dGUiLCJjYXRlZ29yeVRvRW51bSIsImhyZWYiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInRpdGxlIiwiYXV0aG9ycyIsInJlY2lwaWVudHMiLCJmYW5kb21zIiwid2FybmluZ3MiLCJzdW1tYXJ5Iiwic2VyaWVzIiwidXBkYXRlRGF0ZSIsInJhdGluZyIsInJhdGluZ1RvRW51bSIsImNhdGVnb3JpZXMiLCJjb21wbGV0ZSIsImxhbmd1YWdlIiwid29yZENvdW50IiwicGFyc2VJbnQiLCJjaGFwdGVyQ291bnQiLCJmaW5hbENoYXB0ZXJDb3VudCIsImNvbGxlY3Rpb25zIiwiY29tbWVudHMiLCJib29rbWFya3MiLCJyYXdXb3JrcyIsInR5cGUiLCJjbGFzc0xpc3QiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY29uc3RydWN0UmF3V29ya0xpc3QiLCJSQVRJTkciLCJDQVRFR09SWSIsIldBUk5JTkciLCJpZFRvV2FybmluZ0VudW0iLCJpZFRvQ2F0ZXRvcnlFbnVtIiwiaWRUb1JhdGluZ0VudW0iLCJISURFX1VSTFMiLCJSRURJUkVDVF9VUkxTIiwiU0VUVElOR1NfQ0hBTkdFRCIsIkRFRkFVTFRfVkFMVUVTIiwiU1RPUkFHRV9LRVlTIiwia3Vkb3NIaXRSYXRpbyIsImZpbHRlcmluZyIsInF1ZXJ5IiwiaWQiLCJub3RSYXRlZCIsImdlbiIsInRlZW4iLCJtYXR1cmUiLCJleHBsaWNpdCIsImZtIiwibW0iLCJvdGhlciIsImZmIiwibXVsdGkiLCJjaG9zZU5vdFRvVXNlIiwibm9XYXJuaW5nc0FwcGx5IiwidmlvbGVuY2UiLCJtY2QiLCJub25Db24iLCJ1bmRlcmFnZSIsIndhcm5pbmciLCJjYXRlZ29yeSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJyYXRpb18xIiwib25sb2FkUHJvbWlzZSIsImJyb3dzZXIiLCJzdG9yYWdlIiwibG9jYWwiLCJnZXQiLCJ0aGVuIiwia2V5cyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=