(()=>{"use strict";var e={432:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRedirectURL=void 0,n.getRedirectURL=function(e,n){if(!n.filtering)return null;let t,r=function(e){let n=e.split("/"),t=n[n.length-1].split("?");if(n.length>6){if("pseuds"==n[5]&&n[4]!=n[6])return[n[3],t[0].substring(0,t[0].length-1),n[4],`pseud_id=${n[6]}`+(t.length>1?`&${t[1]}`:"")];if("collections"==n[3])return[n[3],t[0].substring(0,t[0].length-1),n[4],`tag_id=${n[6]}`+(t.length>1?`&${t[1]}`:"")]}return[n[3],t[0].substring(0,t[0].length-1),n[n.length-2],t.length>1?t[1]:""]}(e),o=r[1];t="tags"==r[0]?"tag_id=":"users"==r[0]?"user_id=":"collection_id=";let l=r[2],i=[],s=[],u="",a="";null!=n.language&&n.language[0]&&(a=n.language[1]),null!=n.query&&n.query[0]&&(u=n.query[1]),null!=n.tags&&(s=n.tags),null!=n.warnings&&(i=n.warnings);let g=function(e,n,t,r=[],o=[],l=[],i=[],s="",u="",a=[],g=[],c="",h=""){let d="";null==r||r.forEach((e=>d+=`exclude_${n}_search[rating_ids][]=${e.valueOf()}&`));let f="";null==o||o.forEach((e=>f+=`exclude_${n}_search[archive_warning_ids][]=${e.valueOf()}&`));let _="";null==l||l.forEach((e=>_+=`exclude_${n}_search[category_ids][]=${e.valueOf()}&`));let m=`${n}_search[excluded_tag_names]=`;null==i||i.forEach((e=>m+=`${e.valueOf()},`)),m=i.length>0?m.substring(0,m.length-1)+"&":"";let E="";""!=s&&(E=`${n}_search[crossover]=${s}&`);let p="";""!=u&&(p=`${n}_search[complete]=${u}&`);let $="";a.length>0&&(null!=a[0]&&($+=`${n}_search[words_from]=${a[0]}&`),null!=a[1]&&($+=`${n}_search[words_to]=${a[1]}&`));let R="";g.length>0&&(null!=g[0]&&(R+=`${n}_search[date_from]=${g[0]}&`),null!=g[1]&&(R+=`${n}_search[date_to]=${g[1]}&`));let T=""==c?"":`${n}_search[${"bookmark"==n?"bookmarkable_":""}query]=${c}&`,v=""==h?"":`${n}_search[language_id]=${h}&`;if(0==d.length&&0==f.length&&0==_.length&&0==m.length&&0==E.length&&0==$.length&&0==R.length&&0==T.length&&0==v.length)return null;let w=`${n}s?${d}${f}${_}${m}${E}${p}${$}${R}${T}${v}commit=Sort+and+Filter&${e.valueOf()}${t}`;return w="collection_id="==e?`https://archiveofourown.org/collections/${t}/`+w:"https://archiveofourown.org/"+w,w}(t,o,l,[],i,[],s,"","",[],[],u,a);return null!=g?(g+=0==r[3].length?"":"&"+r[3],g):null}},733:(e,n)=>{var t,r,o;Object.defineProperty(n,"__esModule",{value:!0}),n.categoryToEnum=n.ratingToEnum=n.warningToEnum=n.idToWarningEnum=n.idToCatetoryEnum=n.idToRatingEnum=n.WARNING=n.CATEGORY=n.RATING=n.HIDE_URLS=n.REDIRECT_URLS=n.SETTINGS_CHANGED=n.DEFAULT_VALUES=n.STORAGE_KEYS=void 0,n.STORAGE_KEYS=["kudosHitRatio","filtering","language","query","tags","warnings"],n.DEFAULT_VALUES={kudosHitRatio:!0,filtering:!1,language:[!1,""],query:[!1,""],tags:[],warnings:[]},n.SETTINGS_CHANGED="settings_changed",n.REDIRECT_URLS=["https://archiveofourown.org/tags/*/works","https://archiveofourown.org/tags/*/bookmarks","https://archiveofourown.org/users/*/works*","https://archiveofourown.org/users/*/bookmarks*","https://archiveofourown.org/collections/*/works","https://archiveofourown.org/collections/*/bookmarks"],n.HIDE_URLS=["https://archiveofourown.org/users/","https://archiveofourown.org/users/.*/series","https://archiveofourown.org/users/.*/gifts","https://archiveofourown.org/collections/.*/series"],function(e){e[e.notRated=9]="notRated",e[e.gen=10]="gen",e[e.teen=11]="teen",e[e.mature=12]="mature",e[e.explicit=13]="explicit"}(t=n.RATING||(n.RATING={})),function(e){e[e.gen=21]="gen",e[e.fm=22]="fm",e[e.mm=23]="mm",e[e.other=24]="other",e[e.ff=116]="ff",e[e.multi=2246]="multi"}(r=n.CATEGORY||(n.CATEGORY={})),function(e){e[e.choseNotToUse=14]="choseNotToUse",e[e.noWarningsApply=16]="noWarningsApply",e[e.violence=17]="violence",e[e.mcd=18]="mcd",e[e.nonCon=19]="nonCon",e[e.underage=20]="underage"}(o=n.WARNING||(n.WARNING={})),n.idToRatingEnum=function(e){return 9==e?t.notRated:10==e?t.gen:11==e?t.teen:12==e?t.mature:t.explicit},n.idToCatetoryEnum=function(e){return 21==e?r.gen:22==e?r.fm:23==e?r.mm:24==e?r.other:116==e?r.ff:r.multi},n.idToWarningEnum=function(e){return 14==e?o.choseNotToUse:16==e?o.noWarningsApply:17==e?o.violence:18==e?o.mcd:19==e?o.nonCon:o.underage},n.warningToEnum=function(e){return"Choose Not To Use Archive Warnings"==e?o.choseNotToUse:"Graphic Depictions Of Violence"==e?o.violence:"Major Character Death"==e?o.mcd:"No Archive Warnings Apply"==e?o.noWarningsApply:"Rape/Non-Con"==e?o.nonCon:o.underage},n.ratingToEnum=function(e){return"Not Rated"==e?t.notRated:"General Audiences"==e?t.gen:"Teen And Up Audiences"==e?t.teen:"Mature"==e?t.mature:t.explicit},n.categoryToEnum=function(e){return"F/F"==e?r.ff:"F/M"==e?r.fm:"Gen"==e?r.gen:"M/M"==e?r.mm:"Multi"==e?r.multi:r.other}}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var l=n[r]={exports:{}};return e[r](l,l.exports,t),l.exports}(()=>{const e=t(733),n=t(432);let r;browser.storage.local.get(e.STORAGE_KEYS).then((e=>{r=e})),browser.browserAction.onClicked.addListener((function(){browser.tabs.create({url:"/build/options/options.html"})})),browser.webRequest.onBeforeRequest.addListener((function(e){let t=(0,n.getRedirectURL)(e.url,r);return null!=t?{redirectUrl:t}:{}}),{urls:e.REDIRECT_URLS,types:["main_frame"]},["blocking"]),browser.runtime.onMessage.addListener((n=>{n==e.SETTINGS_CHANGED&&browser.storage.local.get(e.STORAGE_KEYS).then((e=>{r=e}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQ0lQLFFBQVFRLEtBQUtDLE9BQU8sQ0FDaEJoRyxJQUFLLCtCQUViLElBckNBdUYsUUFBUVUsV0FBV0MsZ0JBQWdCSixhQW1CbkMsU0FBa0JLLEdBRWQsSUFBSW5HLEdBQU0sRUFBSXFGLEVBQVd0RixnQkFBZ0JvRyxFQUFRbkcsSUFBS3NGLEdBRXRELE9BQVcsTUFBUHRGLEVBQ08sQ0FDSG1CLFlBQWFuQixHQUdWLENBQUMsQ0FDaEIsR0E3QnlELENBQ3JEb0csS0FBTWhCLEVBQVk3QixjQUNsQjhDLE1BQU8sQ0FBQyxlQUNULENBQUMsYUFFSmQsUUFBUWUsUUFBUUMsVUFBVVQsYUFBYVUsSUFDL0JBLEdBQVdwQixFQUFZNUIsa0JBRXZCK0IsUUFBUUMsUUFBUUMsTUFBTUMsSUFBSU4sRUFBWTFCLGNBQWNpQyxNQUFNN0YsSUFDdER3RixFQUFXeEYsQ0FBSyxHQUV4QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2JhY2tncm91bmQvcmVkaXJlY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V4cG9ydC9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy8uL3NyYy9iYWNrZ3JvdW5kL2JhY2tncm91bmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5nZXRSZWRpcmVjdFVSTCA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIFJlZGlyZWN0IGdpdmVuIHVybCB0byB1cmwgdGhhdCBmaWx0ZXJzIGV4Y2x1ZGVkIHdvcmtzXHJcbiAqIEBwYXJhbSB1cmwgVXJsIHRvIHJlZGlyZWN0XHJcbiAqIEBwYXJhbSB2YWx1ZSBFeGNsdWRlZCB3b3JrcyBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBVcmwgdG8gcmVkaXJlY3QgdG8sIG9yIG51bGwgaWYgdXJsIHNob3VsZG4ndCBiZSByZWRpcmVjdGVkXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRSZWRpcmVjdFVSTCh1cmwsIHZhbHVlKSB7XHJcbiAgICAvLyBJZiBmaWx0ZXJpbmcgaXMgb2ZmLCByZXR1cm4gbnVsbFxyXG4gICAgaWYgKCF2YWx1ZS5maWx0ZXJpbmcpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBsZXQgcGFyc2VkID0gcGFyc2VVUkwodXJsKTtcclxuICAgIGxldCB0eXBlID0gcGFyc2VkWzFdO1xyXG4gICAgbGV0IG9yaWdpbjtcclxuICAgIGlmIChwYXJzZWRbMF0gPT0gJ3RhZ3MnKVxyXG4gICAgICAgIG9yaWdpbiA9IFwidGFnX2lkPVwiIC8qIE9SSUdJTi5UQUdTICovO1xyXG4gICAgZWxzZSBpZiAocGFyc2VkWzBdID09ICd1c2VycycpXHJcbiAgICAgICAgb3JpZ2luID0gXCJ1c2VyX2lkPVwiIC8qIE9SSUdJTi5VU0VSUyAqLztcclxuICAgIGVsc2VcclxuICAgICAgICBvcmlnaW4gPSBcImNvbGxlY3Rpb25faWQ9XCIgLyogT1JJR0lOLkNPTExFQ1RJT05TICovO1xyXG4gICAgbGV0IGlkID0gcGFyc2VkWzJdO1xyXG4gICAgbGV0IHJhdGluZyA9IFtdO1xyXG4gICAgbGV0IHdhcm5pbmcgPSBbXTtcclxuICAgIGxldCBjYXRlZ29yeSA9IFtdO1xyXG4gICAgbGV0IHRhZyA9IFtdO1xyXG4gICAgbGV0IGNyb3Nzb3ZlciA9IFwiXCI7XHJcbiAgICBsZXQgY29tcGxldGUgPSBcIlwiO1xyXG4gICAgbGV0IHdvcmRDb3VudCA9IFtdO1xyXG4gICAgbGV0IGRhdGUgPSBbXTtcclxuICAgIGxldCBxdWVyeSA9IFwiXCI7XHJcbiAgICBsZXQgbGFuZ3VhZ2UgPSBcIlwiO1xyXG4gICAgLy8gR2V0IGV4Y2x1ZGUgZGF0YSBmcm9tIGxvY2FsIHN0b3JhZ2VcclxuICAgIGlmICh2YWx1ZS5sYW5ndWFnZSAhPSB1bmRlZmluZWQgJiYgdmFsdWUubGFuZ3VhZ2VbMF0pXHJcbiAgICAgICAgbGFuZ3VhZ2UgPSB2YWx1ZS5sYW5ndWFnZVsxXTtcclxuICAgIGlmICh2YWx1ZS5xdWVyeSAhPSB1bmRlZmluZWQgJiYgdmFsdWUucXVlcnlbMF0pXHJcbiAgICAgICAgcXVlcnkgPSB2YWx1ZS5xdWVyeVsxXTtcclxuICAgIGlmICh2YWx1ZS50YWdzICE9IHVuZGVmaW5lZClcclxuICAgICAgICB0YWcgPSB2YWx1ZS50YWdzO1xyXG4gICAgaWYgKHZhbHVlLndhcm5pbmdzICE9IHVuZGVmaW5lZClcclxuICAgICAgICB3YXJuaW5nID0gdmFsdWUud2FybmluZ3M7XHJcbiAgICBsZXQgcmVkaXJlY3RVcmwgPSBjb25zdHJ1Y3RSZWRpcmVjdFVSTEhlbHBlcihvcmlnaW4sIHR5cGUsIGlkLCByYXRpbmcsIHdhcm5pbmcsIGNhdGVnb3J5LCB0YWcsIGNyb3Nzb3ZlciwgY29tcGxldGUsIHdvcmRDb3VudCwgZGF0ZSwgcXVlcnksIGxhbmd1YWdlKTtcclxuICAgIGlmIChyZWRpcmVjdFVybCAhPSBudWxsKSB7XHJcbiAgICAgICAgcmVkaXJlY3RVcmwgKz0gcGFyc2VkWzNdLmxlbmd0aCA9PSAwID8gXCJcIiA6IFwiJlwiICsgcGFyc2VkWzNdO1xyXG4gICAgICAgIHJldHVybiByZWRpcmVjdFVybDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxufVxyXG5leHBvcnRzLmdldFJlZGlyZWN0VVJMID0gZ2V0UmVkaXJlY3RVUkw7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHJlZGlyZWN0IFVSTCB0byBjb250YWluIGV4Y2x1ZGVkIHRhZ3MsIG92ZXJyaWRpbmcgdGhlIHByZXZpb3VzIFVSTCdzIGhpc3RvcnlcclxuICogQHBhcmFtIG9yaWdpbiBPcmlnaW4gb2YgZG9jdW1lbnRcclxuICogQHBhcmFtIHR5cGUgVHlwZSBvZiB3b3JrcyBiZWluZyBzaG93biAoJ3dvcmsnIG9yICdib29rbWFyaycpXHJcbiAqIEBwYXJhbSBpZCBJRCBvZiB0aGUgdXJsIHRvIHJlZGlyZWN0XHJcbiAqIEBwYXJhbSBleGNsdWRlUmF0aW5ncyBJRCBvZiByYXRpbmdzIHRvIGV4Y2x1ZGVcclxuICogQHBhcmFtIGV4Y2x1ZGVXYXJuaW5ncyBJRCBvZiB3YXJuaW5ncyB0byBleGNsdWRlXHJcbiAqIEBwYXJhbSBleGNsdWRlQ2F0ZWdvcmllcyBJRCBvZiBjYXRlZ29yaWVzIHRvIGV4Y2x1ZGVcclxuICogQHBhcmFtIGV4Y2x1ZGVUYWdzIFRhZ3MgdG8gZXhjbHVkZVxyXG4gKiBAcGFyYW0gY3Jvc3NvdmVyQm9vbCBJbmNsdWRlLCBleGNsdWRlLCBvciBleGNsdXNpdmVseSBzaG93IGNyb3Nzb3ZlciB3b3Jrc1xyXG4gKiBAcGFyYW0gY29tcGxldGVCb29sIEluY2x1ZGUsIGV4Y2x1ZGUsIG9yIGV4Y2x1c2l2ZWx5IHNob3cgY29tcGxldGUgd29ya3NcclxuICogQHBhcmFtIHdvcmRDb3VudE51bXMgTGltaXQgd29ya3MgdG8gZ2l2ZW4gd29yZCBjb3VudCBpbnRlcnZhbFxyXG4gKiBAcGFyYW0gZGF0ZUFyciBMaW1pdCB3b3JrcyB0byBnaXZlbiBkYXRlIGludGVydmFsXHJcbiAqIEBwYXJhbSBxdWVyeSBRdWVyeSB3aXRoaW4gcmVzdWx0c1xyXG4gKiBAcGFyYW0gbGFuZ3VhZ2VJZCBJRCBvZiBsYW5ndWFnZSB0byBsaW1pdCB3b3JrcyB0b1xyXG4gKiBAcmV0dXJucyBVUkwgdG8gcmVkaXJlY3QgdG9cclxuICovXHJcbmZ1bmN0aW9uIGNvbnN0cnVjdFJlZGlyZWN0VVJMSGVscGVyKG9yaWdpbiwgdHlwZSwgaWQsIGV4Y2x1ZGVSYXRpbmdzID0gW10sIGV4Y2x1ZGVXYXJuaW5ncyA9IFtdLCBleGNsdWRlQ2F0ZWdvcmllcyA9IFtdLCBleGNsdWRlVGFncyA9IFtdLCBjcm9zc292ZXJCb29sID0gXCJcIiwgY29tcGxldGVCb29sID0gXCJcIiwgd29yZENvdW50TnVtcyA9IFtdLCBkYXRlQXJyID0gW10sIHF1ZXJ5ID0gXCJcIiwgbGFuZ3VhZ2VJZCA9IFwiXCIpIHtcclxuICAgIC8vIENvbnN0cnVjdCBleGNsdWRlIHVybCBxdWVyaWVzXHJcbiAgICBsZXQgcmF0aW5ncyA9IFwiXCI7XHJcbiAgICBleGNsdWRlUmF0aW5ncyA9PT0gbnVsbCB8fCBleGNsdWRlUmF0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhjbHVkZVJhdGluZ3MuZm9yRWFjaCgocikgPT4gcmF0aW5ncyArPSBgZXhjbHVkZV8ke3R5cGV9X3NlYXJjaFtyYXRpbmdfaWRzXVtdPSR7ci52YWx1ZU9mKCl9JmApO1xyXG4gICAgbGV0IGFyY2hpdmVXYXJuaW5ncyA9IFwiXCI7XHJcbiAgICBleGNsdWRlV2FybmluZ3MgPT09IG51bGwgfHwgZXhjbHVkZVdhcm5pbmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBleGNsdWRlV2FybmluZ3MuZm9yRWFjaCgodykgPT4gYXJjaGl2ZVdhcm5pbmdzICs9IGBleGNsdWRlXyR7dHlwZX1fc2VhcmNoW2FyY2hpdmVfd2FybmluZ19pZHNdW109JHt3LnZhbHVlT2YoKX0mYCk7XHJcbiAgICBsZXQgY2F0ZWdvcmllcyA9IFwiXCI7XHJcbiAgICBleGNsdWRlQ2F0ZWdvcmllcyA9PT0gbnVsbCB8fCBleGNsdWRlQ2F0ZWdvcmllcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhjbHVkZUNhdGVnb3JpZXMuZm9yRWFjaCgoYykgPT4gY2F0ZWdvcmllcyArPSBgZXhjbHVkZV8ke3R5cGV9X3NlYXJjaFtjYXRlZ29yeV9pZHNdW109JHtjLnZhbHVlT2YoKX0mYCk7XHJcbiAgICBsZXQgdGFncyA9IGAke3R5cGV9X3NlYXJjaFtleGNsdWRlZF90YWdfbmFtZXNdPWA7XHJcbiAgICBleGNsdWRlVGFncyA9PT0gbnVsbCB8fCBleGNsdWRlVGFncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhjbHVkZVRhZ3MuZm9yRWFjaCgodCkgPT4gdGFncyArPSBgJHt0LnZhbHVlT2YoKX0sYCk7XHJcbiAgICBpZiAoZXhjbHVkZVRhZ3MubGVuZ3RoID4gMClcclxuICAgICAgICB0YWdzID0gdGFncy5zdWJzdHJpbmcoMCwgdGFncy5sZW5ndGggLSAxKSArIFwiJlwiO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHRhZ3MgPSBcIlwiO1xyXG4gICAgbGV0IGNyb3Nzb3ZlciA9IFwiXCI7XHJcbiAgICBpZiAoY3Jvc3NvdmVyQm9vbCAhPSBcIlwiKSB7XHJcbiAgICAgICAgY3Jvc3NvdmVyID0gYCR7dHlwZX1fc2VhcmNoW2Nyb3Nzb3Zlcl09JHtjcm9zc292ZXJCb29sfSZgO1xyXG4gICAgfVxyXG4gICAgbGV0IGNvbXBsZXRlID0gXCJcIjtcclxuICAgIGlmIChjb21wbGV0ZUJvb2wgIT0gXCJcIikge1xyXG4gICAgICAgIGNvbXBsZXRlID0gYCR7dHlwZX1fc2VhcmNoW2NvbXBsZXRlXT0ke2NvbXBsZXRlQm9vbH0mYDtcclxuICAgIH1cclxuICAgIGxldCB3b3JkQ291bnQgPSBcIlwiO1xyXG4gICAgaWYgKHdvcmRDb3VudE51bXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGlmICh3b3JkQ291bnROdW1zWzBdICE9IG51bGwpXHJcbiAgICAgICAgICAgIHdvcmRDb3VudCArPSBgJHt0eXBlfV9zZWFyY2hbd29yZHNfZnJvbV09JHt3b3JkQ291bnROdW1zWzBdfSZgO1xyXG4gICAgICAgIGlmICh3b3JkQ291bnROdW1zWzFdICE9IG51bGwpXHJcbiAgICAgICAgICAgIHdvcmRDb3VudCArPSBgJHt0eXBlfV9zZWFyY2hbd29yZHNfdG9dPSR7d29yZENvdW50TnVtc1sxXX0mYDtcclxuICAgIH1cclxuICAgIGxldCBkYXRlID0gXCJcIjtcclxuICAgIGlmIChkYXRlQXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBpZiAoZGF0ZUFyclswXSAhPSBudWxsKVxyXG4gICAgICAgICAgICBkYXRlICs9IGAke3R5cGV9X3NlYXJjaFtkYXRlX2Zyb21dPSR7ZGF0ZUFyclswXX0mYDtcclxuICAgICAgICBpZiAoZGF0ZUFyclsxXSAhPSBudWxsKVxyXG4gICAgICAgICAgICBkYXRlICs9IGAke3R5cGV9X3NlYXJjaFtkYXRlX3RvXT0ke2RhdGVBcnJbMV19JmA7XHJcbiAgICB9XHJcbiAgICBsZXQgc2VhcmNoV2l0aGluUmVzdWx0cyA9IHF1ZXJ5ID09IFwiXCIgPyBcIlwiIDogYCR7dHlwZX1fc2VhcmNoWyR7dHlwZSA9PSAnYm9va21hcmsnID8gJ2Jvb2ttYXJrYWJsZV8nIDogXCJcIn1xdWVyeV09JHtxdWVyeX0mYDtcclxuICAgIGxldCBsYW5ndWFnZSA9IGxhbmd1YWdlSWQgPT0gXCJcIiA/IFwiXCIgOiBgJHt0eXBlfV9zZWFyY2hbbGFuZ3VhZ2VfaWRdPSR7bGFuZ3VhZ2VJZH0mYDtcclxuICAgIC8vIENvbnN0cnVjdCBmdWxsIHVybFxyXG4gICAgaWYgKHJhdGluZ3MubGVuZ3RoID09IDAgJiYgYXJjaGl2ZVdhcm5pbmdzLmxlbmd0aCA9PSAwICYmIGNhdGVnb3JpZXMubGVuZ3RoID09IDAgJiYgdGFncy5sZW5ndGggPT0gMCAmJiBjcm9zc292ZXIubGVuZ3RoID09IDAgJiYgd29yZENvdW50Lmxlbmd0aCA9PSAwICYmIGRhdGUubGVuZ3RoID09IDAgJiYgc2VhcmNoV2l0aGluUmVzdWx0cy5sZW5ndGggPT0gMCAmJiBsYW5ndWFnZS5sZW5ndGggPT0gMClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGxldCByZWRpcmVjdCA9IGAke3R5cGV9cz8ke3JhdGluZ3N9JHthcmNoaXZlV2FybmluZ3N9JHtjYXRlZ29yaWVzfSR7dGFnc30ke2Nyb3Nzb3Zlcn0ke2NvbXBsZXRlfSR7d29yZENvdW50fSR7ZGF0ZX0ke3NlYXJjaFdpdGhpblJlc3VsdHN9JHtsYW5ndWFnZX1jb21taXQ9U29ydCthbmQrRmlsdGVyJiR7b3JpZ2luLnZhbHVlT2YoKX0ke2lkfWA7XHJcbiAgICBpZiAob3JpZ2luID09IFwiY29sbGVjdGlvbl9pZD1cIiAvKiBPUklHSU4uQ09MTEVDVElPTlMgKi8pXHJcbiAgICAgICAgcmVkaXJlY3QgPSBgaHR0cHM6Ly9hcmNoaXZlb2ZvdXJvd24ub3JnL2NvbGxlY3Rpb25zLyR7aWR9L2AgKyByZWRpcmVjdDtcclxuICAgIGVsc2VcclxuICAgICAgICByZWRpcmVjdCA9IGBodHRwczovL2FyY2hpdmVvZm91cm93bi5vcmcvYCArIHJlZGlyZWN0O1xyXG4gICAgcmV0dXJuIHJlZGlyZWN0O1xyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgYW4gQU8zIHVybCBhbmQgcmV0dXJucyBpdHMgb3JpZ2luLCBzZWFyY2ggdHlwZSwgYW5kIGlkLlxyXG4gKiBAcGFyYW0gYmFzZVVSTCBVUkwgdG8gYmUgcGFyc2VkLlxyXG4gKiBAcmV0dXJucyBvcmlnaW46J3RhZ3MnLCAndXNlcnMnLCBvciAnY29sbGVjdGlvbnMuJ1xyXG4gKiBAcmV0dXJucyBzZWFyY2hUeXBlOiAnd29ya3MnIG9yICdib29rbWFya3MuJ1xyXG4gKiBAcmV0dXJucyBpZDogaWQgb2YgZmFuZG9tIChpZiBvcmlnaW49J3dvcmtzJyksIGlkIG9mIHVzZXIgKGlmIG9yaWdpbj0nYm9va21hcmtzKSwgb3IgaWQgb2YgY29sbGVjdGlvbiAoaWYgb3JpZ2luPSdjb2xsZWN0aW9ucycpLlxyXG4gKiBAcmV0dXJucyBleHRyYUlkOiBFeHRyYSBpZHMgaW4gVVJMcywgb3IgZW1wdHkgc3RyaW5nIGlmIG5vIGV4dHJhIGlkLiBSZXR1cm5lZCBhcyBmdWxsIGlkIHdpdGggZGVmaW5pdGlvbiAoRXg6IFwiZmFuZG9tX2lkPTEyMzQxMjNcIikuXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZVVSTChiYXNlVVJMKSB7XHJcbiAgICBsZXQgc3BsaXQgPSBiYXNlVVJMLnNwbGl0KCcvJyk7XHJcbiAgICBsZXQgZW5kID0gc3BsaXRbc3BsaXQubGVuZ3RoIC0gMV0uc3BsaXQoXCI/XCIpO1xyXG4gICAgaWYgKHNwbGl0Lmxlbmd0aCA+IDYpIHtcclxuICAgICAgICBpZiAoc3BsaXRbNV0gPT0gXCJwc2V1ZHNcIiAmJiBzcGxpdFs0XSAhPSBzcGxpdFs2XSlcclxuICAgICAgICAgICAgcmV0dXJuIFtzcGxpdFszXSwgZW5kWzBdLnN1YnN0cmluZygwLCBlbmRbMF0ubGVuZ3RoIC0gMSksIHNwbGl0WzRdLCBgcHNldWRfaWQ9JHtzcGxpdFs2XX1gICsgKGVuZC5sZW5ndGggPiAxID8gYCYke2VuZFsxXX1gIDogXCJcIildO1xyXG4gICAgICAgIGVsc2UgaWYgKHNwbGl0WzNdID09ICdjb2xsZWN0aW9ucycpXHJcbiAgICAgICAgICAgIHJldHVybiBbc3BsaXRbM10sIGVuZFswXS5zdWJzdHJpbmcoMCwgZW5kWzBdLmxlbmd0aCAtIDEpLCBzcGxpdFs0XSwgYHRhZ19pZD0ke3NwbGl0WzZdfWAgKyAoZW5kLmxlbmd0aCA+IDEgPyBgJiR7ZW5kWzFdfWAgOiBcIlwiKV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW3NwbGl0WzNdLCBlbmRbMF0uc3Vic3RyaW5nKDAsIGVuZFswXS5sZW5ndGggLSAxKSwgc3BsaXRbc3BsaXQubGVuZ3RoIC0gMl0sIGVuZC5sZW5ndGggPiAxID8gZW5kWzFdIDogXCJcIl07XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jYXRlZ29yeVRvRW51bSA9IGV4cG9ydHMucmF0aW5nVG9FbnVtID0gZXhwb3J0cy53YXJuaW5nVG9FbnVtID0gZXhwb3J0cy5pZFRvV2FybmluZ0VudW0gPSBleHBvcnRzLmlkVG9DYXRldG9yeUVudW0gPSBleHBvcnRzLmlkVG9SYXRpbmdFbnVtID0gZXhwb3J0cy5XQVJOSU5HID0gZXhwb3J0cy5DQVRFR09SWSA9IGV4cG9ydHMuUkFUSU5HID0gZXhwb3J0cy5ISURFX1VSTFMgPSBleHBvcnRzLlJFRElSRUNUX1VSTFMgPSBleHBvcnRzLlNFVFRJTkdTX0NIQU5HRUQgPSBleHBvcnRzLkRFRkFVTFRfVkFMVUVTID0gZXhwb3J0cy5TVE9SQUdFX0tFWVMgPSB2b2lkIDA7XHJcbi8vIFN0b3JhZ2Uga2V5c1xyXG5leHBvcnRzLlNUT1JBR0VfS0VZUyA9IFtcclxuICAgIFwia3Vkb3NIaXRSYXRpb1wiLCBcImZpbHRlcmluZ1wiLCBcImxhbmd1YWdlXCIsIFwicXVlcnlcIiwgXCJ0YWdzXCIsIFwid2FybmluZ3NcIlxyXG5dO1xyXG4vLyBEZWZhdWx0IHZhbHVlc1xyXG5leHBvcnRzLkRFRkFVTFRfVkFMVUVTID0ge1xyXG4gICAga3Vkb3NIaXRSYXRpbzogdHJ1ZSxcclxuICAgIGZpbHRlcmluZzogZmFsc2UsXHJcbiAgICBsYW5ndWFnZTogW2ZhbHNlLCBcIlwiXSxcclxuICAgIHF1ZXJ5OiBbZmFsc2UsIFwiXCJdLFxyXG4gICAgdGFnczogW10sXHJcbiAgICB3YXJuaW5nczogW11cclxufTtcclxuLy8gU2V0dGluZ3MgY2hhbmdlZCBtZXNzYWdlXHJcbmV4cG9ydHMuU0VUVElOR1NfQ0hBTkdFRCA9IFwic2V0dGluZ3NfY2hhbmdlZFwiO1xyXG4vKiogUmVkaXJlY3QgdGhlc2UgVVJMcyB0byBmaWx0ZXIgd29ya3Mgd2l0aCBleGNsdWRlZCBzdHVmZiAqL1xyXG5leHBvcnRzLlJFRElSRUNUX1VSTFMgPSBbXHJcbiAgICBgaHR0cHM6Ly9hcmNoaXZlb2ZvdXJvd24ub3JnL3RhZ3MvKi93b3Jrc2AsXHJcbiAgICBgaHR0cHM6Ly9hcmNoaXZlb2ZvdXJvd24ub3JnL3RhZ3MvKi9ib29rbWFya3NgLFxyXG4gICAgYGh0dHBzOi8vYXJjaGl2ZW9mb3Vyb3duLm9yZy91c2Vycy8qL3dvcmtzKmAsXHJcbiAgICBgaHR0cHM6Ly9hcmNoaXZlb2ZvdXJvd24ub3JnL3VzZXJzLyovYm9va21hcmtzKmAsXHJcbiAgICBgaHR0cHM6Ly9hcmNoaXZlb2ZvdXJvd24ub3JnL2NvbGxlY3Rpb25zLyovd29ya3NgLFxyXG4gICAgYGh0dHBzOi8vYXJjaGl2ZW9mb3Vyb3duLm9yZy9jb2xsZWN0aW9ucy8qL2Jvb2ttYXJrc2AgLy8gQ29sbGVjdGlvbidzIGJvb2ttYXJrc1xyXG5dO1xyXG4vKiogQ2Fubm90IHJlZGlyZWN0IHRoZXNlIFVSTHMsIG5lZWQgdG8gaGlkZSB3b3JrcyB3aXRoIGV4Y2x1ZGVkIHN0dWZmICovXHJcbmV4cG9ydHMuSElERV9VUkxTID0gW1xyXG4gICAgYGh0dHBzOlxcL1xcL2FyY2hpdmVvZm91cm93blxcLm9yZ1xcL3VzZXJzXFwvYCxcclxuICAgIGBodHRwczpcXC9cXC9hcmNoaXZlb2ZvdXJvd25cXC5vcmdcXC91c2Vyc1xcLy4qXFwvc2VyaWVzYCxcclxuICAgIGBodHRwczpcXC9cXC9hcmNoaXZlb2ZvdXJvd25cXC5vcmdcXC91c2Vyc1xcLy4qXFwvZ2lmdHNgLFxyXG4gICAgYGh0dHBzOlxcL1xcL2FyY2hpdmVvZm91cm93blxcLm9yZ1xcL2NvbGxlY3Rpb25zXFwvLipcXC9zZXJpZXNgLCAvLyBDb2xsZWN0aW9uJ3Mgc2VyaWVzXHJcbl07XHJcbjtcclxuLyoqIFJhdGluZyBvZiB3b3JrcyB0byBpZCAqL1xyXG52YXIgUkFUSU5HO1xyXG4oZnVuY3Rpb24gKFJBVElORykge1xyXG4gICAgUkFUSU5HW1JBVElOR1tcIm5vdFJhdGVkXCJdID0gOV0gPSBcIm5vdFJhdGVkXCI7XHJcbiAgICBSQVRJTkdbUkFUSU5HW1wiZ2VuXCJdID0gMTBdID0gXCJnZW5cIjtcclxuICAgIFJBVElOR1tSQVRJTkdbXCJ0ZWVuXCJdID0gMTFdID0gXCJ0ZWVuXCI7XHJcbiAgICBSQVRJTkdbUkFUSU5HW1wibWF0dXJlXCJdID0gMTJdID0gXCJtYXR1cmVcIjtcclxuICAgIFJBVElOR1tSQVRJTkdbXCJleHBsaWNpdFwiXSA9IDEzXSA9IFwiZXhwbGljaXRcIjtcclxufSkoUkFUSU5HID0gZXhwb3J0cy5SQVRJTkcgfHwgKGV4cG9ydHMuUkFUSU5HID0ge30pKTtcclxuLyoqIENhdGVnb3J5IG9mIHdvcmsgdG8gaWQgKi9cclxudmFyIENBVEVHT1JZO1xyXG4oZnVuY3Rpb24gKENBVEVHT1JZKSB7XHJcbiAgICBDQVRFR09SWVtDQVRFR09SWVtcImdlblwiXSA9IDIxXSA9IFwiZ2VuXCI7XHJcbiAgICBDQVRFR09SWVtDQVRFR09SWVtcImZtXCJdID0gMjJdID0gXCJmbVwiO1xyXG4gICAgQ0FURUdPUllbQ0FURUdPUllbXCJtbVwiXSA9IDIzXSA9IFwibW1cIjtcclxuICAgIENBVEVHT1JZW0NBVEVHT1JZW1wib3RoZXJcIl0gPSAyNF0gPSBcIm90aGVyXCI7XHJcbiAgICBDQVRFR09SWVtDQVRFR09SWVtcImZmXCJdID0gMTE2XSA9IFwiZmZcIjtcclxuICAgIENBVEVHT1JZW0NBVEVHT1JZW1wibXVsdGlcIl0gPSAyMjQ2XSA9IFwibXVsdGlcIjtcclxufSkoQ0FURUdPUlkgPSBleHBvcnRzLkNBVEVHT1JZIHx8IChleHBvcnRzLkNBVEVHT1JZID0ge30pKTtcclxuLyoqIFdhcm5pbmdzIG9mIHdvcmsgdG8gaWQgKi9cclxudmFyIFdBUk5JTkc7XHJcbihmdW5jdGlvbiAoV0FSTklORykge1xyXG4gICAgV0FSTklOR1tXQVJOSU5HW1wiY2hvc2VOb3RUb1VzZVwiXSA9IDE0XSA9IFwiY2hvc2VOb3RUb1VzZVwiO1xyXG4gICAgV0FSTklOR1tXQVJOSU5HW1wibm9XYXJuaW5nc0FwcGx5XCJdID0gMTZdID0gXCJub1dhcm5pbmdzQXBwbHlcIjtcclxuICAgIFdBUk5JTkdbV0FSTklOR1tcInZpb2xlbmNlXCJdID0gMTddID0gXCJ2aW9sZW5jZVwiO1xyXG4gICAgV0FSTklOR1tXQVJOSU5HW1wibWNkXCJdID0gMThdID0gXCJtY2RcIjtcclxuICAgIFdBUk5JTkdbV0FSTklOR1tcIm5vbkNvblwiXSA9IDE5XSA9IFwibm9uQ29uXCI7XHJcbiAgICBXQVJOSU5HW1dBUk5JTkdbXCJ1bmRlcmFnZVwiXSA9IDIwXSA9IFwidW5kZXJhZ2VcIjtcclxufSkoV0FSTklORyA9IGV4cG9ydHMuV0FSTklORyB8fCAoZXhwb3J0cy5XQVJOSU5HID0ge30pKTtcclxuLyoqXHJcbiAqIFRha2VzIHJhdGluZyBpZCBvZiB3b3JrIGFuZCBjb252ZXJ0cyBpdCB0byBhbiBlbnVtIHZhbHVlXHJcbiAqIEBwYXJhbSBpZCBJZCBvZiByYXRpbmdcclxuICogQHJldHVybnMgUkFUSU5HIGVudW0gY29udmVydGVkIGZyb20gaWRcclxuICovXHJcbmZ1bmN0aW9uIGlkVG9SYXRpbmdFbnVtKGlkKSB7XHJcbiAgICBpZiAoaWQgPT0gOSlcclxuICAgICAgICByZXR1cm4gUkFUSU5HLm5vdFJhdGVkO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMTApXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5nZW47XHJcbiAgICBlbHNlIGlmIChpZCA9PSAxMSlcclxuICAgICAgICByZXR1cm4gUkFUSU5HLnRlZW47XHJcbiAgICBlbHNlIGlmIChpZCA9PSAxMilcclxuICAgICAgICByZXR1cm4gUkFUSU5HLm1hdHVyZTtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gUkFUSU5HLmV4cGxpY2l0O1xyXG59XHJcbmV4cG9ydHMuaWRUb1JhdGluZ0VudW0gPSBpZFRvUmF0aW5nRW51bTtcclxuLyoqXHJcbiAqIFRha2VzIGNhdGVnb3J5IGlkIG9mIHdvcmsgYW5kIGNvbnZlcnRzIGl0IHRvIGFuIGVudW0gdmFsdWVcclxuICogQHBhcmFtIGlkIElkIG9mIGNhdGVnb3J5XHJcbiAqIEByZXR1cm5zIENBVEVHT1JZIGVudW0gY29udmVydGVkIGZyb20gaWRcclxuICovXHJcbmZ1bmN0aW9uIGlkVG9DYXRldG9yeUVudW0oaWQpIHtcclxuICAgIGlmIChpZCA9PSAyMSlcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkuZ2VuO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMjIpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLmZtO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMjMpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLm1tO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMjQpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLm90aGVyO1xyXG4gICAgZWxzZSBpZiAoaWQgPT0gMTE2KVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5mZjtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkubXVsdGk7XHJcbn1cclxuZXhwb3J0cy5pZFRvQ2F0ZXRvcnlFbnVtID0gaWRUb0NhdGV0b3J5RW51bTtcclxuLyoqXHJcbiAqIFRha2VzIHdhcm5pbmcgaWQgb2Ygd29yayBhbmQgY29udmVydHMgaXQgdG8gYW4gZW51bSB2YWx1ZVxyXG4gKiBAcGFyYW0gaWQgSWQgb2Ygd2FybmluZ1xyXG4gKiBAcmV0dXJucyBXQVJOSU5HIGVudW0gY29udmVydGVkIGZyb20gaWRcclxuICovXHJcbmZ1bmN0aW9uIGlkVG9XYXJuaW5nRW51bShpZCkge1xyXG4gICAgaWYgKGlkID09IDE0KVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLmNob3NlTm90VG9Vc2U7XHJcbiAgICBlbHNlIGlmIChpZCA9PSAxNilcclxuICAgICAgICByZXR1cm4gV0FSTklORy5ub1dhcm5pbmdzQXBwbHk7XHJcbiAgICBlbHNlIGlmIChpZCA9PSAxNylcclxuICAgICAgICByZXR1cm4gV0FSTklORy52aW9sZW5jZTtcclxuICAgIGVsc2UgaWYgKGlkID09IDE4KVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLm1jZDtcclxuICAgIGVsc2UgaWYgKGlkID09IDE5KVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLm5vbkNvbjtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gV0FSTklORy51bmRlcmFnZTtcclxufVxyXG5leHBvcnRzLmlkVG9XYXJuaW5nRW51bSA9IGlkVG9XYXJuaW5nRW51bTtcclxuLyoqXHJcbiAqIENvbnZlcnRzIHN0cmluZyB2YWx1ZSBvZiBhIHdhcm5pbmcgdG8gdGhlIGNvcnJlc3BvbmRpbmcgV0FSTklORyBlbnVtXHJcbiAqIEBwYXJhbSB3YXJuaW5nIFN0cmluZyBvZiB3YXJuaW5nIGZyb20gcGFnZVxyXG4gKiBAcmV0dXJucyBDb252ZXJ0ZWQgZW51bSB2YWx1ZSBvZiBwYXJhbVxyXG4gKi9cclxuZnVuY3Rpb24gd2FybmluZ1RvRW51bSh3YXJuaW5nKSB7XHJcbiAgICBpZiAod2FybmluZyA9PSBcIkNob29zZSBOb3QgVG8gVXNlIEFyY2hpdmUgV2FybmluZ3NcIilcclxuICAgICAgICByZXR1cm4gV0FSTklORy5jaG9zZU5vdFRvVXNlO1xyXG4gICAgZWxzZSBpZiAod2FybmluZyA9PSBcIkdyYXBoaWMgRGVwaWN0aW9ucyBPZiBWaW9sZW5jZVwiKVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLnZpb2xlbmNlO1xyXG4gICAgZWxzZSBpZiAod2FybmluZyA9PSBcIk1ham9yIENoYXJhY3RlciBEZWF0aFwiKVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLm1jZDtcclxuICAgIGVsc2UgaWYgKHdhcm5pbmcgPT0gXCJObyBBcmNoaXZlIFdhcm5pbmdzIEFwcGx5XCIpXHJcbiAgICAgICAgcmV0dXJuIFdBUk5JTkcubm9XYXJuaW5nc0FwcGx5O1xyXG4gICAgZWxzZSBpZiAod2FybmluZyA9PSBcIlJhcGUvTm9uLUNvblwiKVxyXG4gICAgICAgIHJldHVybiBXQVJOSU5HLm5vbkNvbjtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gV0FSTklORy51bmRlcmFnZTtcclxufVxyXG5leHBvcnRzLndhcm5pbmdUb0VudW0gPSB3YXJuaW5nVG9FbnVtO1xyXG4vKipcclxuICogQ29udmVydHMgc3RyaW5nIHZhbHVlIG9mIGEgcmF0aW5nIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJBVElORyBlbnVtXHJcbiAqIEBwYXJhbSB3YXJuaW5nIFN0cmluZyBvZiByYXRpbmcgZnJvbSBwYWdlXHJcbiAqIEByZXR1cm5zIENvbnZlcnRlZCBlbnVtIHZhbHVlIG9mIHBhcmFtXHJcbiAqL1xyXG5mdW5jdGlvbiByYXRpbmdUb0VudW0ocmF0aW5nKSB7XHJcbiAgICBpZiAocmF0aW5nID09IFwiTm90IFJhdGVkXCIpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5ub3RSYXRlZDtcclxuICAgIGVsc2UgaWYgKHJhdGluZyA9PSBcIkdlbmVyYWwgQXVkaWVuY2VzXCIpXHJcbiAgICAgICAgcmV0dXJuIFJBVElORy5nZW47XHJcbiAgICBlbHNlIGlmIChyYXRpbmcgPT0gXCJUZWVuIEFuZCBVcCBBdWRpZW5jZXNcIilcclxuICAgICAgICByZXR1cm4gUkFUSU5HLnRlZW47XHJcbiAgICBlbHNlIGlmIChyYXRpbmcgPT0gXCJNYXR1cmVcIilcclxuICAgICAgICByZXR1cm4gUkFUSU5HLm1hdHVyZTtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gUkFUSU5HLmV4cGxpY2l0O1xyXG59XHJcbmV4cG9ydHMucmF0aW5nVG9FbnVtID0gcmF0aW5nVG9FbnVtO1xyXG4vKipcclxuICogQ29udmVydHMgc3RyaW5nIHZhbHVlIG9mIGEgY2F0ZWdvcnkgdG8gdGhlIGNvcnJlc3BvbmRpbmcgQ0FURUdPUlkgZW51bVxyXG4gKiBAcGFyYW0gd2FybmluZyBTdHJpbmcgb2YgY2F0ZWdvcnkgZnJvbSBwYWdlXHJcbiAqIEByZXR1cm5zIENvbnZlcnRlZCBlbnVtIHZhbHVlIG9mIHBhcmFtXHJcbiAqL1xyXG5mdW5jdGlvbiBjYXRlZ29yeVRvRW51bShjYXRlZ29yeSkge1xyXG4gICAgaWYgKGNhdGVnb3J5ID09IFwiRi9GXCIpXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLmZmO1xyXG4gICAgZWxzZSBpZiAoY2F0ZWdvcnkgPT0gXCJGL01cIilcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkuZm07XHJcbiAgICBlbHNlIGlmIChjYXRlZ29yeSA9PSBcIkdlblwiKVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5nZW47XHJcbiAgICBlbHNlIGlmIChjYXRlZ29yeSA9PSBcIk0vTVwiKVxyXG4gICAgICAgIHJldHVybiBDQVRFR09SWS5tbTtcclxuICAgIGVsc2UgaWYgKGNhdGVnb3J5ID09IFwiTXVsdGlcIilcclxuICAgICAgICByZXR1cm4gQ0FURUdPUlkubXVsdGk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIENBVEVHT1JZLm90aGVyO1xyXG59XHJcbmV4cG9ydHMuY2F0ZWdvcnlUb0VudW0gPSBjYXRlZ29yeVRvRW51bTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2V4cG9ydC9jb25zdGFudHNcIik7XHJcbmNvbnN0IHJlZGlyZWN0XzEgPSByZXF1aXJlKFwiLi9yZWRpcmVjdFwiKTtcclxuLy8gKiBHbG9iYWwgdmFyaWFibGVzXHJcbmxldCBzZXR0aW5ncztcclxuLy8gKiBFeGVjdXRlZCBjb2RlIHN0YXJ0XHJcbi8vIFNldCBzZXR0aW5ncyB0byBiZSBjdXJyZW50bHkgc3RvcmVkIHNldHRpbmdzXHJcbmJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoY29uc3RhbnRzXzEuU1RPUkFHRV9LRVlTKS50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgc2V0dGluZ3MgPSB2YWx1ZTtcclxufSk7XHJcbi8vICogRXhlY3V0ZWQgY29kZSBlbmRcclxuLy8gKiBMaXN0ZW5lcnNcclxuLy8gT3BlbiBvcHRpb24gbWVudSBvbiBicm93c2VyIGFjdGlvbiBpY29uIGNsaWNrXHJcbmJyb3dzZXIuYnJvd3NlckFjdGlvbi5vbkNsaWNrZWQuYWRkTGlzdGVuZXIob3Blbk9wdGlvbk1lbnUpO1xyXG4vLyBSZWRpcmVjdCBVUkxzIHRvIGZpbHRlciB3b3Jrc1xyXG5icm93c2VyLndlYlJlcXVlc3Qub25CZWZvcmVSZXF1ZXN0LmFkZExpc3RlbmVyKHJlZGlyZWN0LCB7XHJcbiAgICB1cmxzOiBjb25zdGFudHNfMS5SRURJUkVDVF9VUkxTLFxyXG4gICAgdHlwZXM6IFsnbWFpbl9mcmFtZSddXHJcbn0sIFsnYmxvY2tpbmcnXSk7XHJcbi8vIFN5bmNoIHNldHRpbmdzIG9uIHNldHRpbmdzIGNoYW5nZVxyXG5icm93c2VyLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChtZXNzYWdlKSA9PiB7XHJcbiAgICBpZiAobWVzc2FnZSA9PSBjb25zdGFudHNfMS5TRVRUSU5HU19DSEFOR0VEKSB7XHJcbiAgICAgICAgLy8gR2V0IHNldHRpbmdzIGZyb20gc3RvcmFnZVxyXG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoY29uc3RhbnRzXzEuU1RPUkFHRV9LRVlTKS50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBzZXR0aW5ncyA9IHZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuLy8gKiBGdW5jdGlvbnNcclxuLyoqXHJcbiAqIFJlZGlyZWN0cyB1cmwgdG8gZmlsdGVyIGV4Y2x1ZGVkIHdvcmtzXHJcbiAqIEBwYXJhbSBkZXRhaWxzIFdlYiByZXF1ZXN0IGRldGFpbHNcclxuICogQHJldHVybnMgV2ViIHJlcXVlc3QgQmxvY2tpbmdSZXNwb25zZSBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIHJlZGlyZWN0KGRldGFpbHMpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGBBTzNFeHRlbnNpb246IGRldGFpbHMudXJsPSR7ZGV0YWlscy51cmx9YCk7IC8vIERFQlVHR0lOR1xyXG4gICAgbGV0IHVybCA9ICgwLCByZWRpcmVjdF8xLmdldFJlZGlyZWN0VVJMKShkZXRhaWxzLnVybCwgc2V0dGluZ3MpO1xyXG4gICAgLy8gY29uc29sZS5sb2coYEFPM0V4dGVuc2lvbjogdXJsPSR7dXJsfWApOyAvLyBERUJVR0dJTkdcclxuICAgIGlmICh1cmwgIT0gbnVsbClcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWRpcmVjdFVybDogdXJsXHJcbiAgICAgICAgfTtcclxuICAgIGVsc2VcclxuICAgICAgICByZXR1cm4ge307XHJcbn1cclxuLyoqXHJcbiAqIE9wZW5zIG9wdGlvbiBtZW51IGZvciBleHRlbnNpb25cclxuICovXHJcbmZ1bmN0aW9uIG9wZW5PcHRpb25NZW51KCkge1xyXG4gICAgYnJvd3Nlci50YWJzLmNyZWF0ZSh7XHJcbiAgICAgICAgdXJsOiBcIi9idWlsZC9vcHRpb25zL29wdGlvbnMuaHRtbFwiXHJcbiAgICB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRSZWRpcmVjdFVSTCIsInVybCIsImZpbHRlcmluZyIsIm9yaWdpbiIsInBhcnNlZCIsImJhc2VVUkwiLCJzcGxpdCIsImVuZCIsImxlbmd0aCIsInN1YnN0cmluZyIsInBhcnNlVVJMIiwidHlwZSIsImlkIiwid2FybmluZyIsInRhZyIsInF1ZXJ5IiwibGFuZ3VhZ2UiLCJ1bmRlZmluZWQiLCJ0YWdzIiwid2FybmluZ3MiLCJyZWRpcmVjdFVybCIsImV4Y2x1ZGVSYXRpbmdzIiwiZXhjbHVkZVdhcm5pbmdzIiwiZXhjbHVkZUNhdGVnb3JpZXMiLCJleGNsdWRlVGFncyIsImNyb3Nzb3ZlckJvb2wiLCJjb21wbGV0ZUJvb2wiLCJ3b3JkQ291bnROdW1zIiwiZGF0ZUFyciIsImxhbmd1YWdlSWQiLCJyYXRpbmdzIiwiZm9yRWFjaCIsInIiLCJ2YWx1ZU9mIiwiYXJjaGl2ZVdhcm5pbmdzIiwidyIsImNhdGVnb3JpZXMiLCJjIiwidCIsImNyb3Nzb3ZlciIsImNvbXBsZXRlIiwid29yZENvdW50IiwiZGF0ZSIsInNlYXJjaFdpdGhpblJlc3VsdHMiLCJyZWRpcmVjdCIsImNvbnN0cnVjdFJlZGlyZWN0VVJMSGVscGVyIiwiUkFUSU5HIiwiQ0FURUdPUlkiLCJXQVJOSU5HIiwiY2F0ZWdvcnlUb0VudW0iLCJyYXRpbmdUb0VudW0iLCJ3YXJuaW5nVG9FbnVtIiwiaWRUb1dhcm5pbmdFbnVtIiwiaWRUb0NhdGV0b3J5RW51bSIsImlkVG9SYXRpbmdFbnVtIiwiSElERV9VUkxTIiwiUkVESVJFQ1RfVVJMUyIsIlNFVFRJTkdTX0NIQU5HRUQiLCJERUZBVUxUX1ZBTFVFUyIsIlNUT1JBR0VfS0VZUyIsImt1ZG9zSGl0UmF0aW8iLCJub3RSYXRlZCIsImdlbiIsInRlZW4iLCJtYXR1cmUiLCJleHBsaWNpdCIsImZtIiwibW0iLCJvdGhlciIsImZmIiwibXVsdGkiLCJjaG9zZU5vdFRvVXNlIiwibm9XYXJuaW5nc0FwcGx5IiwidmlvbGVuY2UiLCJtY2QiLCJub25Db24iLCJ1bmRlcmFnZSIsInJhdGluZyIsImNhdGVnb3J5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNvbnN0YW50c18xIiwicmVkaXJlY3RfMSIsInNldHRpbmdzIiwiYnJvd3NlciIsInN0b3JhZ2UiLCJsb2NhbCIsImdldCIsInRoZW4iLCJicm93c2VyQWN0aW9uIiwib25DbGlja2VkIiwiYWRkTGlzdGVuZXIiLCJ0YWJzIiwiY3JlYXRlIiwid2ViUmVxdWVzdCIsIm9uQmVmb3JlUmVxdWVzdCIsImRldGFpbHMiLCJ1cmxzIiwidHlwZXMiLCJydW50aW1lIiwib25NZXNzYWdlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=